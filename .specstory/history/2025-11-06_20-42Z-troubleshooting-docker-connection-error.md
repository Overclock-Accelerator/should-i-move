<!-- Generated by SpecStory, Markdown v2.1.0 -->

<!-- cursor Session 99357e39-ca4f-4240-b861-d1c662eccd0e (2025-11-06 20:42Z) -->

# Troubleshooting Docker connection error (2025-11-06 20:42Z)

_**User (2025-11-06 20:41Z)**_

what is this?

ahmed@TheMountain MINGW64 /c/CodeWork/should-i-move (main)
$ bash start-agentos.sh
==============================================================================
üöÄ AgentOS Quick Start for 'Should I Move?' Application
==============================================================================

‚úÖ Python found: Python 3.13.7

‚úÖ .env file found

‚úÖ Docker found: Docker version 28.5.1, build e180ab8

error during connect: Get "http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/containers/json?filters=%7B%22name%22%3A%7B%22agentos-postgres%22%3Atrue%7D%7D": open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified.
üêò Starting PostgreSQL with pgvector...
docker: error during connect: Head "http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/_ping": open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified. 

Run 'docker run --help' for more information
(.venv)
ahmed@TheMountain MINGW64 /c/CodeWork/should-i-move (main)
$





---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user is running the `start-agentos.sh` script and encountering a Docker error. The error message indicates:

```
error during connect: Get "http://%2F%2F.%2Fpipe%2FdockerDesktopLinuxEngine/v1.51/containers/json?filters=%7B%22name%22%3A%7B%22agentos-postgres%22%3Atrue%7D%7D": open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified.
```

This is a classic Docker Desktop error on Windows - it means Docker Desktop is not running. The script is trying to connect to the Docker daemon through the named pipe `//./pipe/dockerDesktopLinuxEngine`, but it can't find it because Docker Desktop isn't started.

Let me read the start-agentos.sh script to understand what it's trying to do, and then provide a clear explanation to the user.</details></think>

---

I can see the issue - **Docker Desktop is not running** on your Windows machine. The error message indicates the script is trying to connect to Docker but can't find the Docker daemon:

```
open //./pipe/dockerDesktopLinuxEngine: The system cannot find the file specified.
```

Let me check the startup script to understand what it's trying to do:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: start-agentos.sh</summary>

</details>
</tool-use>

---

_**User (2025-11-06 20:41Z)**_

Docker found: Docker version 28.5.1, build e180ab8



‚úÖ PostgreSQL container already running



üîß Activating virtual environment...

start-agentos.sh: line 92: venv/bin/activate: No such file or directory

üì• Installing dependencies...



[notice] A new release of pip is available: 25.2 -> 25.3

[notice] To update, run: python.exe -m pip install --upgrade pip

ERROR: To modify pip, please run the following command:

C:\CodeWork\should-i-move\venv\Scripts\python.exe -m pip install -q --upgrade pip

(.venv) 

ahmed@TheMountain MINGW64 /c/CodeWork/should-i-move (main)

$ ^C

(.venv) 

ahmed@TheMountain MINGW64 /c/CodeWork/should-i-move (main)

$

---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user is showing me a follow-up error. They got Docker running, but now there are issues with the virtual environment setup. Let me analyze the errors:

1. Docker is now working - the PostgreSQL container is already running
2. The script is trying to activate `venv/bin/activate` but that file doesn't exist
3. There's a `.venv` directory (indicated by the prompt showing `(.venv)`), not `venv`
4. There's a pip upgrade error

The issue is that the user has a `.venv` directory but the script is looking for `venv`. The script needs to be updated to check for both `.venv` and `venv`, or we should just use the existing `.venv`.

Let me check what exists and update the script accordingly.</details></think>

---

Good progress! Docker is now running. The issue now is that the script is looking for `venv/` but you have `.venv/` instead.

**The problem:** The script checks for and tries to activate `venv` but your virtual environment is named `.venv`.

Let me fix the startup script to handle both cases:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: start-agentos.sh</summary>

**Chunk 1**
Lines added: 8, lines removed: 3

```diff
@@ -82,13 +82,18 @@
  
  # Check if virtual environment exists
- if [ ! -d "venv" ]; then
+ if [ -d ".venv" ]; then
+     VENV_DIR=".venv"
+ elif [ -d "venv" ]; then
+     VENV_DIR="venv"
+ else
      echo -e "${BLUE}üì¶ Creating virtual environment...${NC}"
-     python -m venv venv
+     python -m venv .venv
+     VENV_DIR=".venv"
      echo -e "${GREEN}‚úÖ Virtual environment created${NC}"
  fi
  
  # Activate virtual environment
  echo -e "${BLUE}üîß Activating virtual environment...${NC}"
- source venv/bin/activate || source venv/Scripts/activate 2&gt;/dev/null
+ source "$VENV_DIR/bin/activate" 2&gt;/dev/null || source "$VENV_DIR/Scripts/activate" 2&gt;/dev/null
  
  # Install dependencies
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good, I've updated the script to handle both `.venv` and `venv`. Now I should also update the Windows batch file to be consistent.</details></think>

---

Now let me also fix the Windows batch file for consistency:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: start-agentos.bat</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to update the Windows batch file to also handle both .venv and venv.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: start-agentos.bat</summary>

**Chunk 1**
Lines added: 8, lines removed: 3

```diff
@@ -72,13 +72,18 @@
  
  REM Check if virtual environment exists
- if not exist venv (
+ if exist .venv (
+     set VENV_DIR=.venv
+ ) else if exist venv (
+     set VENV_DIR=venv
+ ) else (
      echo üì¶ Creating virtual environment...
-     python -m venv venv
+     python -m venv .venv
+     set VENV_DIR=.venv
      echo ‚úÖ Virtual environment created
  )
  
  REM Activate virtual environment
  echo üîß Activating virtual environment...
- call venv\Scripts\activate.bat
+ call !VENV_DIR!\Scripts\activate.bat
  
  REM Install dependencies
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good, I've updated both scripts. Now let me provide a summary of what was fixed.</details></think>

---

## Fixed

The script was hardcoded to look for `venv/` but your project uses `.venv/`. Updated both startup scripts to:

1. Check for `.venv` first (your existing virtual environment)
2. Fall back to `venv` if it exists
3. Create `.venv` if neither exists

**Changes made:**
- `start-agentos.sh` - Now detects both `.venv` and `venv` directories
- `start-agentos.bat` - Same update for Windows compatibility

**Try running again:**
```bash
bash start-agentos.sh
```

The script should now properly activate your existing `.venv` environment and proceed with installing dependencies.

---

_**User (2025-11-06 20:41Z)**_

once its running do I just visit:

https://os.agno.com/ 

---

_**Agent (model claude-4.5-sonnet-thinking, mode Ask)**_

<think><details><summary>Thought Process</summary>
The user is asking about how to access the application once it's running. Let me check the README and the startup script to see what the correct URLs are.

From the startup script I saw earlier, it showed:
- Local URL: http://localhost:7777
- API Docs: http://localhost:7777/docs
- Next Steps: Visit https://app.agno.com to access the Control Plane

So it looks like:
1. The application runs locally on http://localhost:7777
2. You access the Control Plane at https://app.agno.com (not https://os.agno.com/)
3. From the Control Plane, you connect to your local AgentOS instance

Let me check the README to confirm this.</details></think>

---

No, not quite. Let me check the setup instructions:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: agentos-reference/README.md</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The README says "Web interface at app.agno.com". Let me check the GETTING_STARTED.md file for more specific instructions about the URLs.</details></think>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "app\.agno\.com|os\.agno\.com|localhost:7777" in "agentos-reference/GETTING_STARTED.md" ‚Ä¢ 15 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `agentos-reference/GETTING_STARTED.md` | `- **Control Plane**: Beautiful web interface at https://app.agno.com` | L21 |
| `agentos-reference/GETTING_STARTED.md` | `Browser ‚Üí Control Plane (app.agno.com)` | L30 |
| `agentos-reference/GETTING_STARTED.md` | `FastAPI Server (localhost:7777)` | L32 |
| `agentos-reference/GETTING_STARTED.md` | `- Local URL: http://localhost:7777` | L131 |
| `agentos-reference/GETTING_STARTED.md` | `- API Docs: http://localhost:7777/docs` | L132 |
| `agentos-reference/GETTING_STARTED.md` | `1. Visit **https://app.agno.com**` | L137 |
| `agentos-reference/GETTING_STARTED.md` | `4. Enter: `http://localhost:7777`` | L140 |
| `agentos-reference/GETTING_STARTED.md` | `curl -X POST "http://localhost:7777/teams/move-decision-team/runs" \` | L221 |
| `agentos-reference/GETTING_STARTED.md` | `curl -X POST "http://localhost:7777/sessions" \` | L230 |
| `agentos-reference/GETTING_STARTED.md` | `curl -X POST "http://localhost:7777/agents/cost-analyst/runs" \` | L240 |
| `agentos-reference/GETTING_STARTED.md` | `**Full API Docs:** http://localhost:7777/docs` | L248 |
| `agentos-reference/GETTING_STARTED.md` | `curl http://localhost:7777/health` | L405 |
| `agentos-reference/GETTING_STARTED.md` | `3. **Explore Control Plane:** https://app.agno.com` | L552 |
| `agentos-reference/GETTING_STARTED.md` | `4. **Test API:** http://localhost:7777/docs` | L553 |
| `agentos-reference/GETTING_STARTED.md` | `- **Control Plane:** https://app.agno.com` | L560 |


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Got it! So the correct URL is https://app.agno.com (not https://os.agno.com/). The user seems to have the wrong URL.

The workflow is:
1. Your application runs locally on http://localhost:7777
2. You visit https://app.agno.com (the Control Plane)
3. From there, you connect it to your local instance at http://localhost:7777</details></think>

---

Not quite! Once your local AgentOS server is running, here's what you do:

**Your local application runs at:** `http://localhost:7777`

**But you access it through the Control Plane at:** **https://app.agno.com** (not os.agno.com)

### Here's the workflow:

1. **Start your local server** (what you're doing now):
   ```bash
   bash start-agentos.sh
   ```
   This runs AgentOS locally on `http://localhost:7777`

2. **Visit the Control Plane**: https://app.agno.com

3. **Connect them together**:
   - Click "Connect AgentOS" in the Control Plane
   - Enter: `http://localhost:7777`
   - This connects the web interface to your local agents

4. **Start chatting!** Use the beautiful web interface at app.agno.com to interact with your "Should I Move?" agents

**You can also use the API directly:**
- API Docs: http://localhost:7777/docs
- Direct API calls to `http://localhost:7777/agents/...`

The Control Plane at [app.agno.com](https://app.agno.com) provides the UI, while your local server at `localhost:7777` does the actual AI agent work.

---

_**User (2025-11-06 20:41Z)**_

it looks like app.agno.com has been replaced by os.agno.com

---

_**Agent (model claude-4.5-sonnet-thinking, mode Ask)**_

<think><details><summary>Thought Process</summary>
The user is saying that app.agno.com has been replaced by os.agno.com. They provided web search results showing https://os.agno.com/ at the beginning of their query. This means the documentation is outdated and references the old URL (app.agno.com) when it should reference the new URL (os.agno.com).

Since the user is in ask mode, I can't edit files. I should acknowledge that they're correct and let them know the documentation needs to be updated with the new URL.</details></think>

---

You're correct! Based on the web search results showing https://os.agno.com/, it looks like Agno has updated their Control Plane URL from `app.agno.com` to `os.agno.com`.

So the correct workflow is:

1. **Start your local server**:
   ```bash
   bash start-agentos.sh
   ```
   (Runs on `http://localhost:7777`)

2. **Visit**: **https://os.agno.com** (not app.agno.com)

3. **Connect AgentOS** and enter: `http://localhost:7777`

4. **Start chatting** through the os.agno.com interface

---

**The documentation is outdated** - all references to `app.agno.com` in the following files should be updated to `os.agno.com`:
- `agentos-reference/README.md`
- `agentos-reference/GETTING_STARTED.md`
- `start-agentos.sh` (line 124)
- `start-agentos.bat` (line 114)

If you'd like me to update these files, switch to **agent mode** and I can make the changes. Otherwise, just remember to use **os.agno.com** instead of the app.agno.com URLs mentioned in the docs.

---

_**User (2025-11-06 20:41Z)**_

ick Start for 'Should I Move?' Application
==============================================================================

‚úÖ Python found: Python 3.13.7

‚úÖ .env file found

‚úÖ Docker found: Docker version 28.5.1, build e180ab8

‚úÖ PostgreSQL container already running

üîß Activating virtual environment...
üì• Installing dependencies...


---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user has switched to agent mode and is showing me that the script is now running and installing dependencies. This is good progress! The script is working after my fixes.

They're currently watching the installation process. I should:
1. Acknowledge the progress
2. Let them know what to expect next
3. Offer to update the outdated URLs in the documentation files from app.agno.com to os.agno.com

Since they're in agent mode now, I can make those documentation updates if needed.</details></think>

---

Great! The script is now working correctly. It's:
- ‚úÖ Using your existing `.venv` virtual environment
- üì• Installing the required dependencies

**What happens next:**
1. Dependencies will finish installing
2. City database will be verified/created
3. AgentOS server will start on `http://localhost:7777`
4. You'll see the server logs

Once it says "Server started" or shows Uvicorn logs, you can:
- Visit **https://os.agno.com**
- Connect to `http://localhost:7777`
- Start using your migration analysis agents

---

While that's installing, would you like me to **update all the outdated documentation** that references `app.agno.com` to the new `os.agno.com` URL? I can update:
- `agentos-reference/README.md`
- `agentos-reference/GETTING_STARTED.md`
- `start-agentos.sh`
- `start-agentos.bat`

Just let me know if you want me to proceed with those updates.

---

_**User (2025-11-06 20:41Z)**_

ick Start for 'Should I Move?' Application
==============================================================================

‚úÖ Python found: Python 3.13.7

‚úÖ .env file found

‚úÖ Docker found: Docker version 28.5.1, build e180ab8

‚úÖ PostgreSQL container already running

üîß Activating virtual environment...
üì• Installing dependencies...


---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The user is showing me the same output again - it looks like the script is running and currently installing dependencies. They haven't asked me to do anything specific, so they're probably just showing me the progress or waiting for it to complete.

I should acknowledge this and let them know what to expect next, but I don't need to take any action unless they ask. They might be waiting for it to finish or encountering an issue.

Let me just acknowledge and provide helpful context about what's happening.</details></think>

---

The script is progressing nicely! It's currently installing dependencies from `requirements-agentos.txt`. This may take a minute or two depending on what's already installed in your `.venv`.

**What's happening:**
- Installing Agno SDK
- Installing AgentOS dependencies
- Installing your custom tools (Brave Search, Firecrawl, etc.)
- Setting up database adapters

**Next steps (automatic):**
1. Verify/create city database
2. Start the AgentOS FastAPI server on port 7777
3. Display connection instructions

Just wait for it to complete. You'll see a message like:
```
üéâ Setup Complete! Starting AgentOS...
```

Then server logs will appear showing it's listening on `http://localhost:7777`.

If it hangs or shows any errors, let me know and I'll help troubleshoot!

---

_**User (2025-11-06 20:41Z)**_


==============================================================================

Press Ctrl+C to stop the server

Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 32, in <module>
    from agno.storage.agent.postgres import PgAgentStorage
ModuleNotFoundError: No module named 'agno.storage'
(.venv) 
ahmed@TheMountain MINGW64 /c/CodeWork/should-i-move (main)
$ ^C
(.venv) 

---

_**Agent (model claude-4.5-sonnet-thinking, mode Agent)**_

<think><details><summary>Thought Process</summary>
The error shows that `agno.storage` module is not found. This suggests that the version of `agno` installed doesn't have the `storage` module, or the import path has changed in newer versions of the Agno SDK.

Let me check:
1. The requirements file to see what version is specified
2. The main AgentOS file to see what imports are being used
3. Look for any version issues

This is likely a version mismatch issue. The code might be written for an older or newer version of Agno than what's being installed.</details></think>

---

There's a module import error - the installed version of `agno` doesn't have the `agno.storage` module. Let me check what's going on:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: requirements-agentos.txt</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The issue is clear - the code is importing `agno.storage.agent.postgres` but this module doesn't exist in the current version of agno. Let me check if there's been an API change in the Agno SDK. I should search for the correct import paths for the latest version of Agno.</details></think>

---

The issue is that the imports are outdated. Let me check the latest Agno API:

---

<tool-use data-tool-type="mcp" data-tool-name="mcp_docs-agno_SearchAgno">
<details>
          <summary>Tool use: **mcp_docs-agno_SearchAgno**</summary>
      
*Called tool*: docs-agno - SearchAgno: Search across the Agno knowledge base to find relevant information, code examples, API references, and guides. Use this tool when you need to answer questions about Agno, find specific documentation, understand how features work, or locate implementation details. The search returns contextual content with titles and direct links to the documentation pages.

*Parameters*:
  * query: PgAgentStorage postgres storage import

*Result*:
Title: PostgresDb
Link: https://docs.agno.com/reference/storage/postgres
Content: PostgresDb is a class that implements the Db interface using PostgreSQL as the backend storage system. It provides robust, relational storage for agent sessions with support for JSONB data types, schema versioning, and efficient querying.

PostgresDb
PostgresDb is a class that implements the Db interface using PostgreSQL as the backend storage system. It provides robust, relational storage for agent sessions with support for JSONB data types, schema versioning, and efficient querying.



*Result*:
Title: Postgres for Workflows
Link: https://docs.agno.com/examples/concepts/db/postgres/postgres_for_workflow
Content: Postgres for Workflows
Agno supports using PostgreSQL as a storage backend for Workflows using the PostgresDb class.

Agno supports using PostgreSQL as a storage backend for Workflows using the PostgresDb class.

Run PgVector
Install docker desktop and run PgVector on port 5532 using: from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIChat
from agno.team import Team
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.tools.hackernews import HackerNewsTools
from agno.workflow.step import Step
from agno.workflow.workflow import Workflow

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

# Define agents
hackernews_agent = Agent(
    name="Hackernews Agent",
    model=OpenAIChat(id="gpt-5-mini"),
    tools=[HackerNewsTools()],
    role="Extract key insights and content from Hackernews posts",
)
web_agent = Agent(
    name="Web Agent",
    model=OpenAIChat(id="gpt-5-mini"),
    tools=[DuckDuckGoTools()],
    role="Search the web for the latest news and trends",
)

# Define research team for complex analysis
research_team = Team(
    name="Research Team",
    members=[hackernews_agent, web_agent],
    instructions="Research tech topics from Hackernews and the web",
)

content_planner = Agent(
    name="Content Planner",
    model=OpenAIChat(id="gpt-5-mini"),
    instructions=[
        "Plan a content schedule over 4 weeks for the provided topic and research content",
        "Ensure that I have posts for 3 posts per week",
    ],
)

# Define steps
research_step = Step(
    name="Research Step",
    team=research_team,
)

content_planning_step = Step(
    name="Content Planning Step",
    agent=content_planner,
)

# Create and use workflow
if __name__ == "__main__":
    content_creation_workflow = Workflow(
        name="Content Creation Workflow",
        description="Automated content creation from blog posts to social media",
        db=PostgresDb(
            session_table="workflow_session",
            db_url=db_url,
        ),
        steps=[research_step, content_planning_step],
    )
    content_creation_workflow.print_response(
        input="AI trends in 2024",
        markdown=True,
    )



*Result*:
Title: Postgres for Team
Link: https://docs.agno.com/examples/concepts/db/postgres/postgres_for_team
Content: Postgres for Team
Agno supports using PostgreSQL as a storage backend for Teams using the PostgresDb class.

Agno supports using PostgreSQL as a storage backend for Teams using the PostgresDb class.

Run PgVector
Install docker desktop and run PgVector on port 5532 using: """
Run: `pip install openai ddgs newspaper4k lxml_html_clean agno` to install the dependencies
"""

from typing import List

from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIChat
from agno.team import Team
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.tools.hackernews import HackerNewsTools
from pydantic import BaseModel

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)


class Article(BaseModel):
    title: str
    summary: str
    reference_links: List[str]


hn_researcher = Agent(
    name="HackerNews Researcher",
    model=OpenAIChat("gpt-5-mini"),
    role="Gets top stories from hackernews.",
    tools=[HackerNewsTools()],
)

web_searcher = Agent(
    name="Web Searcher",
    model=OpenAIChat("gpt-5-mini"),
    role="Searches the web for information on a topic",
    tools=[DuckDuckGoTools()],
    add_datetime_to_context=True,
)


hn_team = Team(
    name="HackerNews Team",
    model=OpenAIChat("gpt-5-mini"),
    members=[hn_researcher, web_searcher],
    db=db,
    instructions=[
        "First, search hackernews for what the user is asking about.",
        "Then, ask the web searcher to search for each story to get more information.",
        "Finally, provide a thoughtful and engaging summary.",
    ],
    output_schema=Article,
    markdown=True,
    show_members_responses=True,
)

hn_team.print_response("Write an article about the top 2 stories on hackernews")



*Result*:
Title: Postgres for Agent
Link: https://docs.agno.com/examples/concepts/db/postgres/postgres_for_agent
Content: Agno supports using PostgreSQL as a storage backend for Agents using the PostgresDb class.

Postgres for Agent
Agno supports using PostgreSQL as a storage backend for Agents using the PostgresDb class.

Run PgVector
Install docker desktop and run PgVector on port 5532 using: from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.tools.duckduckgo import DuckDuckGoTools

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

db = PostgresDb(db_url=db_url)

agent = Agent(
    db=db,
    tools=[DuckDuckGoTools()],
    add_history_to_context=True,
)
agent.print_response("How many people live in Canada?")
agent.print_response("What is their national anthem called?")



*Result*:
Title: Postgres Tools
Link: https://docs.agno.com/examples/concepts/tools/database/postgres
Content: Code
from agno.agent import Agent
from agno.tools.postgres import PostgresTools

agent = Agent(
    tools=[PostgresTools(db_url="postgresql://user:pass@localhost:5432/db")],
        markdown=True,
)
agent.print_response("Show me all tables in the database")

Code
from agno.agent import Agent
from agno.tools.postgres import PostgresTools

agent = Agent(
    tools=[PostgresTools(db_url="postgresql://user:pass@localhost:5432/db")],
        markdown=True,
)
agent.print_response("Show me all tables in the database")

Usage
Set your API key Set your database URL export DATABASE_URL=postgresql://user:pass@localhost:5432/db



*Result*:
Title: Storage
Link: https://docs.agno.com/concepts/teams/storage
Content: Why do we need Session Storage? Teams are ephemeral and stateless. When you run a Team, no state is persisted automatically. In production environments, we serve (or trigger) Teams via an API and need to continue the same session across multiple requests. Storage persists the session history and state in a database and allows us to pick up where we left off. Here is a simple example showing how to configure storage for a Team: from agno.team import Team
from agno.db.postgres import PostgresDb

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

team = Team(members=[], db=db)
team.print_response("What is the capital of France?")
team.print_response("What was my question?")

Use Storage to persist Team sessions and state to a database or file.

Why do we need Session Storage? Teams are ephemeral and stateless. When you run a Team, no state is persisted automatically. In production environments, we serve (or trigger) Teams via an API and need to continue the same session across multiple requests. Storage persists the session history and state in a database and allows us to pick up where we left off. Here is a simple example showing how to configure storage for a Team: See Agent Session Storage for more details on how sessions are stored in general.



*Result*:
Title: Memory with PostgreSQL
Link: https://docs.agno.com/examples/concepts/memory/db/mem-postgres-memory
Content: Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb

# Setup Postgres
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    db=db,
    enable_user_memories=True,
)

agent.print_response("My name is John Doe and I like to play basketball on the weekends.")
agent.print_response("What's do I do in weekends?")

Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb

# Setup Postgres
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    db=db,
    enable_user_memories=True,
)

agent.print_response("My name is John Doe and I like to play basketball on the weekends.")
agent.print_response("What's do I do in weekends?")

Usage
Set environment variables Install libraries Run Example python cookbook/memory/db/mem-postgres-memory.py



*Result*:
Title: Agent with Storage
Link: https://docs.agno.com/examples/models/gemini/storage
Content: Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.google import Gemini
from agno.tools.duckduckgo import DuckDuckGoTools

# Setup the database
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    model=Gemini(id="gemini-2.0-flash-001"),
    db=db,
    tools=[DuckDuckGoTools()],
    add_history_to_context=True,
)
agent.print_response("How many people live in Canada?")
agent.print_response("What is their national anthem called?")

Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.google import Gemini
from agno.tools.duckduckgo import DuckDuckGoTools

# Setup the database
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    model=Gemini(id="gemini-2.0-flash-001"),
    db=db,
    tools=[DuckDuckGoTools()],
    add_history_to_context=True,
)
agent.print_response("How many people live in Canada?")
agent.print_response("What is their national anthem called?")

Usage
Set your API key Install libraries Run PgVector docker run -d \
  -e POSTGRES_DB=ai \
  -e POSTGRES_USER=ai \
  -e POSTGRES_PASSWORD=ai \
  -e PGDATA=/var/lib/postgresql/data/pgdata \
  -v pgvolume:/var/lib/postgresql/data \
  -p 5532:5432 \
  --name pgvector \
  agnohq/pgvector:16



*Result*:
Title: Postgres
Link: https://docs.agno.com/concepts/tools/toolkits/database/postgres
Content: Postgres
PostgresTools enable an Agent to interact with a PostgreSQL database.

PostgresTools enable an Agent to interact with a PostgreSQL database.

Example
The following agent will list all tables in the database. from agno.agent import Agent
from agno.tools.postgres import Tools

# Initialize PostgresTools with connection details
postgres_tools = PostgresTools(
    host="localhost",
    port=5532,
    db_name="ai",
    user="ai",
    password="ai"
)

# Create an agent with the PostgresTools
agent = Agent(tools=[postgres_tools])

# Example: Ask the agent to run a SQL query
agent.print_response("""
Please run a SQL query to get all users from the users table
who signed up in the last 30 days
""")



*Result*:
Title: Agent with Storage
Link: https://docs.agno.com/examples/models/azure/ai_foundry/storage
Content: Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.azure import AzureAIFoundry
from agno.tools.duckduckgo import DuckDuckGoTools

# Setup the database
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    model=AzureAIFoundry(id="Phi-4"),
    db=db,
    tools=[DuckDuckGoTools()],
    add_history_to_context=True,
)
agent.print_response("How many people live in Canada?")
agent.print_response("What is their national anthem called?")

Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb
from agno.models.azure import AzureAIFoundry
from agno.tools.duckduckgo import DuckDuckGoTools

# Setup the database
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    model=AzureAIFoundry(id="Phi-4"),
    db=db,
    tools=[DuckDuckGoTools()],
    add_history_to_context=True,
)
agent.print_response("How many people live in Canada?")
agent.print_response("What is their national anthem called?")

Usage
Set your API key Install libraries Run PgVector docker run -d \
  -e POSTGRES_DB=ai \
  -e POSTGRES_USER=ai \
  -e POSTGRES_PASSWORD=ai \
  -e PGDATA=/var/lib/postgresql/data/pgdata \
  -v pgvolume:/var/lib/postgresql/data \
  -p 5532:5432 \
  --name pgvector \
  agnohq/pgvector:16


</details>
</tool-use>

---

<tool-use data-tool-type="mcp" data-tool-name="mcp_docs-agno_SearchAgno">
<details>
          <summary>Tool use: **mcp_docs-agno_SearchAgno**</summary>
      
*Called tool*: docs-agno - SearchAgno: Search across the Agno knowledge base to find relevant information, code examples, API references, and guides. Use this tool when you need to answer questions about Agno, find specific documentation, understand how features work, or locate implementation details. The search returns contextual content with titles and direct links to the documentation pages.

*Parameters*:
  * query: AgentOS FastAPI integration setup

*Result*:
Title: Create Your First AgentOS
Link: https://docs.agno.com/agent-os/creating-your-first-os
Content: Get started with AgentOS by setting up a minimal local instance.
This guide will have you running your first agent in minutes, with optional paths to add advanced features through our examples. AgentOS is a FastAPI app that you can run locally or in your cloud. If you want to build AgentOS using an existing FastAPI app, check out the Custom FastAPI App guide.

Quick setup guide to get your first AgentOS instance running locally

Minimal Setup
Create my_os.py: from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.os import AgentOS

assistant = Agent(
    name="Assistant",
    model=OpenAIChat(id="gpt-5-mini"),
    instructions=["You are a helpful AI assistant."],
    markdown=True,
)

agent_os = AgentOS(
    id="my-first-os",
    description="My first AgentOS",
    agents=[assistant],
)

app = agent_os.get_app()

if __name__ == "__main__":
    # Default port is 7777; change with port=...
    agent_os.serve(app="my_os:app", reload=True)



*Result*:
Title: Bring Your Own FastAPI App
Link: https://docs.agno.com/agent-os/customize/custom-fastapi
Content: AgentOS is built on FastAPI, which means you can easily integrate your existing FastAPI applications or add custom routes and routers to extend your agent's capabilities.

Running with FastAPI CLI
AgentOS applications are compatible with the FastAPI CLI for development. First, install the FastAPI CLI: pip install "fastapi[standard]"



*Result*:
Title: Custom FastAPI App with JWT Middleware
Link: https://docs.agno.com/examples/agent-os/middleware/custom-fastapi-jwt
Content: Custom FastAPI application with JWT middleware for authentication and AgentOS integration

This example demonstrates how to integrate JWT middleware with your custom FastAPI application and then add AgentOS functionality on top.

Usage
Set Environment Variables Install libraries Setup PostgreSQL Database Run Example Test Authentication Flow Step 1: Login to get JWT token Step 2: Test protected endpoints with token # Test AgentOS config endpoint
curl -H "Authorization: Bearer $TOKEN" \
  "http://localhost:7777/config"

# Test agent interaction
curl -X POST "http://localhost:7777/agents/research-agent/runs" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"message": "Search for information about FastAPI middleware"}'



*Result*:
Title: AgentOS Parameters
Link: https://docs.agno.com/agent-os/customize/os/attributes
Content: You can configure the behaviour of your AgentOS by passing the following parameters to the AgentOS class: agents : List of agents to include in the AgentOS teams : List of teams to include in the AgentOS workflows : List of workflows to include in the AgentOS knowledge : List of knowledge instances to include in the AgentOS interfaces : List of interfaces to include in the AgentOS See the Interfaces section for more details. config : Configuration file path or AgentOSConfig instance See the Configuration page for more details. base_app : Optional custom FastAPI app to use instead of creating a new one See the Custom FastAPI App page for more details. lifespan : Optional lifespan context manager for the FastAPI app See the Lifespan page for more details. enable_mcp_server : Turn your AgentOS into an MCP server See the MCP enabled AgentOS page for more details. on_route_conflict : Optionally preserve your custom routes over AgentOS routes (set to "preserve_base_app" ). Defaults to "preserve_agentos" , preserving the AgentOS routes See the Overriding Routes page for more details. See the AgentOS class reference for more details.

Learn about the attributes of the AgentOS class



*Result*:
Title: Agent Infra AWS
Link: https://docs.agno.com/templates/agent-infra-aws/introduction
Content: The Agent Infra AWS template provides a simple AWS infrastructure for running AgentOS. It contains: An AgentOS instance, serving Agents, Teams, Workflows and utilities using FastAPI. A PostgreSQL database for storing sessions, memories and knowledge. You can run your Agent Infra AWS locally as well as on AWS. This guide goes over the local setup first.

Agent Infra AWS
The Agent Infra AWS template provides a simple AWS infrastructure for running AgentOS. It contains: An AgentOS instance, serving Agents, Teams, Workflows and utilities using FastAPI. A PostgreSQL database for storing sessions, memories and knowledge. You can run your Agent Infra AWS locally as well as on AWS. This guide goes over the local setup first.

Next
Congratulations on running your . Next Steps:



*Result*:
Title: Run your AgentOS
Link: https://docs.agno.com/introduction/quickstart
Content: The AgentOS gives us a FastAPI application with ready-to-use API endpoints for serving, monitoring and managing our Agents. Let's run it. Setup your virtual environment uv venv --python 3.12
source .venv/bin/activate

The AgentOS gives us a FastAPI application with ready-to-use API endpoints for serving, monitoring and managing our Agents. Let's run it. Setup your virtual environment uv venv --python 3.12
.venv/Scripts/activate

The AgentOS gives us a FastAPI application with ready-to-use API endpoints for serving, monitoring and managing our Agents. Let's run it. Setup your virtual environment Install dependencies uv pip install -U agno anthropic mcp 'fastapi[standard]' sqlalchemy



*Result*:
Title: undefined
Link: https://docs.agno.com/
Content: 

*Result*:
Title: What is the AgentOS?
Link: https://docs.agno.com/introduction
Content: AgentOS is a high-performance runtime for multi-agent systems. Key features include: Pre-built FastAPI runtime : AgentOS ships with a ready-to-use FastAPI app for orchestrating your agents, teams, and workflows. This gives you a major head start in building your AI product. Integrated Control Plane : The AgentOS UI connects directly to your runtime, letting you test, monitor, and manage your system in real time. This gives you unmatched visibility and control over your system. Private by Design : AgentOS runs entirely in your cloud, ensuring complete data privacy. No data ever leaves your system. This is ideal for security-conscious enterprises. Here's what the AgentOS UI looks like in action:

The Complete Agentic Solution
For companies building agents, Agno provides the complete solution: The fastest framework for building agents, multi-agent teams and agentic workflows. A ready-to-use FastAPI app that gets you building AI products on day one. A control plane for testing, monitoring and managing your system. We bring a novel architecture that no other framework provides, your AgentOS runs securely in your cloud, and the control plane connects directly to it from your browser. You don't need to send data to any external services or pay retention costs, you get complete privacy and control.

What is Agno?
Use it to build multi-agent systems with memory, knowledge, human in the loop and MCP support. You can orchestrate agents as multi-agent teams (more autonomy) or step-based agentic workflows (more control). Here‚Äôs an example of an Agent that connects to an MCP server, manages conversation state in a database, and is served using a FastAPI application that you can interact with using the AgentOS UI.



*Result*:
Title: AgentOS + MCPTools
Link: https://docs.agno.com/agent-os/mcp/tools
Content: Model Context Protocol (MCP) gives Agents the ability to interact with external systems through a standardized interface. You can give your agents access to tools from MCP servers using MCPTools. When using MCPTools within AgentOS, the lifecycle is automatically managed. No need to manually connect or disconnect the MCPTools instance. This does not automatically refresh connections that are interrupted or restarted, you can use refresh_connection to do so. If you are using MCPTools within AgentOS, you should not use reload=True when serving your AgentOS.
This can break the MCP connection during the FastAPI lifecycle. See here for a full example.

Model Context Protocol (MCP) gives Agents the ability to interact with external systems through a standardized interface. You can give your agents access to tools from MCP servers using MCPTools. When using MCPTools within AgentOS, the lifecycle is automatically managed. No need to manually connect or disconnect the MCPTools instance. from agno.agent import Agent
from agno.os import AgentOS
from agno.tools.mcp import MCPTools

# Create MCPTools instance
mcp_tools = MCPTools(
    transport="streamable-http", 
    url="https://docs.agno.com/mcp"
)

# Create MCP-enabled agent
agent = Agent(
    id="agno-agent",
    name="Agno Agent",
    tools=[mcp_tools],
)

# AgentOS manages MCP lifespan
agent_os = AgentOS(
    description="AgentOS with MCP Tools",
    agents=[agent],
)

app = agent_os.get_app()

if __name__ == "__main__":
    # Don't use reload=True with MCP tools to avoid lifespan issues
    agent_os.serve(app="mcp_tools_example:app")

Learn how to use MCPTools in your AgentOS



*Result*:
Title: AgentOS Configuration
Link: https://docs.agno.com/agent-os/customize/config
Content: For most cases, your AgentOS is configured with a default set of settings. However, you can configure your AgentOS to your liking.

Learn how to check and adjust your AgentOS configuration

Configuring your AgentOS
What can be configured? Display names : You can specify the display name for your AgentOS pages (Sessions, Memory, etc). This is very useful when using multiple databases, to clearly communicate to users which data is being displayed. Quick prompts : You can provide one to three quick prompts for each one of your agents, teams and workflows. These are the prompts that display on the Chat Page when you create a new session.


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! The Agno documentation shows that the API has changed. The correct imports are:
- `from agno.db.postgres import PostgresDb` (not `agno.storage.agent.postgres`)
- For memory: `from agno.memory.db.postgres import PgMemoryDb` (this seems to be the same)
- For vector database: `from agno.vectordb.pgvector import PgVector` (this might also have changed)

Looking at the examples:
- `from agno.db.postgres import PostgresDb` is used for session storage
- For knowledge bases, it seems to use `from agno.knowledge.text import TextKnowledgeBase`

I need to update the imports in the 04-agno-agentos.py file. Let me check all the imports that need to be changed.</details></think>

---

Perfect! I found the issue. The Agno API has changed - the correct import is `agno.db.postgres` not `agno.storage.agent.postgres`. Let me fix the imports:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I need to update the import and also how `PgAgentStorage` is used. According to the docs, it should be `PostgresDb` from `agno.db.postgres`. Let me update this.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -30,5 +30,5 @@
  from agno.tools.firecrawl import FirecrawlTools
  from agno.tools.local_file_system import LocalFileSystemTools
- from agno.storage.agent.postgres import PgAgentStorage
+ from agno.db.postgres import PostgresDb
  from agno.knowledge.text import TextKnowledgeBase
  from agno.memory.db.postgres import PgMemoryDb
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to update the usage of `PgAgentStorage` to `PostgresDb`. Let me update that variable name and initialization.</details></think>

---

Now I need to update where it's used:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -51,5 +51,5 @@
  
  # Configure storage for session management
- agent_storage = PgAgentStorage(
+ agent_storage = PostgresDb(
      table_name="agent_sessions",
      db_url=DB_URL,
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good. Now I need to check if there are any other references to `PgAgentStorage` that need to be updated. Let me search for any other occurrences.</details></think>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "PgAgentStorage|agent_storage" in "04-agno-agentos.py" ‚Ä¢ 6 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `04-agno-agentos.py` | `agent_storage = PostgresDb(` | L53 |
| `04-agno-agentos.py` | `storage=agent_storage,  # Enable session storage` | L258 |
| `04-agno-agentos.py` | `storage=agent_storage,  # Enable session storage` | L280 |
| `04-agno-agentos.py` | `storage=agent_storage,  # Enable session storage` | L304 |
| `04-agno-agentos.py` | `storage=agent_storage,  # Enable session storage` | L350 |
| `04-agno-agentos.py` | `storage=agent_storage,` | L370 |


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The usage looks fine. But according to the Agno docs, the parameter should be `db` not `storage` for agents. Let me check the docs again and then update those references.</details></think>

---

Let me check if the parameter name should be `db` instead of `storage`:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Based on the Agno documentation, the parameter should be `db` not `storage`. Let me update all occurrences of `storage=agent_storage` to `db=agent_storage`.</details></think>

---

Based on the Agno docs, the parameter should be `db` not `storage`. Let me update all occurrences:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -256,5 +256,5 @@
      tools=[get_cost_of_living_comparison],
      output_schema=CostAnalysis,
-     storage=agent_storage,  # Enable session storage
+     db=agent_storage,  # Enable session storage
      memory=memory_db,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -278,5 +278,5 @@
      ],
      output_schema=SentimentAnalysis,
-     storage=agent_storage,  # Enable session storage
+     db=agent_storage,  # Enable session storage
      memory=memory_db,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
```

</details>

</tool-use>

---

The string to replace was not found in the file.

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "storage=agent_storage" in "04-agno-agentos.py" ‚Ä¢ 3 matches</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `04-agno-agentos.py` | `storage=agent_storage,  # Enable session storage` | L304 |
| `04-agno-agentos.py` | `storage=agent_storage,  # Enable session storage` | L350 |
| `04-agno-agentos.py` | `storage=agent_storage,` | L370 |


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
There are still 3 more occurrences. Let me check what those are for - they might be for Teams or other objects that might still use the `storage` parameter.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I see. Line 304 is for the migration_researcher agent, line 350 is for the move_decision_team (which is a Team, not an Agent), and line 370 is for the `create_agentos_app` function. Let me check if Teams also use `db` instead of `storage`, and what parameter `create_agentos_app` uses.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -302,5 +302,5 @@
      tools=[search_reddit_discussions],
      output_schema=MigrationInsights,
-     storage=agent_storage,  # Enable session storage
+     db=agent_storage,  # Enable session storage
      memory=memory_db,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -348,5 +348,5 @@
      ],
      output_schema=FinalRecommendation,
-     storage=agent_storage,  # Enable session storage
+     db=agent_storage,  # Enable session storage
      memory=memory_db,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I need to check what function is used to create the AgentOS app. It looks like it's using `create_agentos_app` but that might not be the correct function name in the new API. Let me check the docs and see what the correct way is to create an AgentOS app.</details></think>

---

Now let me check how to properly create the AgentOS app:

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
According to the Agno docs I found earlier, the correct way to create an AgentOS app is:

```python
from agno.os import AgentOS

agent_os = AgentOS(
    id="my-first-os",
    description="My first AgentOS",
    agents=[assistant],
)

app = agent_os.get_app()
```

So the API has changed from `create_agentos_app` to using the `AgentOS` class. Let me update this.</details></think>

---

The API has changed. Based on the docs, I need to use the `AgentOS` class instead:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 9, lines removed: 5

```diff
@@ -361,13 +361,17 @@
  # ============================================================================
  
- from agno.api.app import create_agentos_app
- 
- # Create the AgentOS FastAPI application
- app = create_agentos_app(
+ from agno.os import AgentOS
+ 
+ # Create the AgentOS instance
+ agent_os = AgentOS(
+     id="should-i-move-os",
+     description="City relocation analysis with multi-agent team",
      agents=[cost_analyst, sentiment_analyst, migration_researcher],
      teams=[move_decision_team],
      knowledge=[relocation_knowledge],
-     storage=agent_storage,
  )
+ 
+ # Get the FastAPI application
+ app = agent_os.get_app()
  
  
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good! Now I should also update the server startup code if needed. Let me check if the uvicorn.run call needs any changes, and then also update the comment in line 17 to use os.agno.com instead of app.agno.com.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -15,5 +15,5 @@
      python agentos_integration.py
  
- Then connect to the AgentOS Control Plane at https://app.agno.com
+ Then connect to the AgentOS Control Plane at https://os.agno.com
  """
  
```

</details>

</tool-use>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
I need to update line 396 from app.agno.com to os.agno.com.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -394,5 +394,5 @@
      print("   - API Docs: http://localhost:7777/docs")
      print("\nüîó Next Steps:")
-     print("   1. Visit https://app.agno.com to access the Control Plane")
+     print("   1. Visit https://os.agno.com to access the Control Plane")
      print("   2. Click 'Connect AgentOS' and enter: http://localhost:7777")
      print("   3. Start chatting with your agents through the web interface!")
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Now I should check if there are any lint errors with the updated code.</details></think>

---

Perfect! Now let's check for any issues:

---

<tool-use data-tool-type="generic" data-tool-name="read_lints">
<details>
          <summary>Tool use: **read_lints** ‚Ä¢ Read lints for 1 file</summary>
      
Lint paths:

- `04-agno-agentos.py`

Lint results


**No lint errors found**
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Great! No linter errors. Now let me also update the documentation files to use os.agno.com instead of app.agno.com as I mentioned earlier.</details></think>

---

Excellent! No linter errors. Now let me update the documentation files to use the correct URL (`os.agno.com`):

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: agentos-reference/README.md</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -62,5 +62,5 @@
  
  ### üöÄ AgentOS (You are here)
- - Web interface at app.agno.com
+ - Web interface at os.agno.com
  - Session persistence across conversations
  - Memory system for personalization
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: start-agentos.sh</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -127,5 +127,5 @@
  echo ""
  echo -e "${BLUE}üîó Next Steps:${NC}"
- echo "   1. Visit https://app.agno.com to access the Control Plane"
+ echo "   1. Visit https://os.agno.com to access the Control Plane"
  echo "   2. Click 'Connect AgentOS' and enter: http://localhost:7777"
  echo "   3. Start chatting with your agents through the web interface!"
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: start-agentos.bat</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -117,5 +117,5 @@
  echo.
  echo üîó Next Steps:
- echo    1. Visit https://app.agno.com to access the Control Plane
+ echo    1. Visit https://os.agno.com to access the Control Plane
  echo    2. Click 'Connect AgentOS' and enter: http://localhost:7777
  echo    3. Start chatting with your agents through the web interface!
```

</details>

</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "app\.agno\.com" in "agentos-reference/GETTING_STARTED.md" ‚Ä¢ 0 matches</summary>

Output mode: count



</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
There are 5 occurrences of app.agno.com in GETTING_STARTED.md. Let me update those as well.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: agentos-reference/GETTING_STARTED.md</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -19,5 +19,5 @@
  
  - **FastAPI Runtime**: Pre-built REST API for serving your agents
- - **Control Plane**: Beautiful web interface at https://app.agno.com
+ - **Control Plane**: Beautiful web interface at https://os.agno.com
  - **Session Management**: Track conversation history across interactions
  - **Memory Persistence**: Store and retrieve memories for personalized interactions
```

**Chunk 2**
Lines added: 1, lines removed: 1

```diff
@@ -28,5 +28,5 @@
  
  &#96;&#96;&#96;
- Browser ‚Üí Control Plane (app.agno.com)
+ Browser ‚Üí Control Plane (os.agno.com)
                ‚Üì
           FastAPI Server (localhost:7777)
```

**Chunk 3**
Lines added: 1, lines removed: 1

```diff
@@ -135,5 +135,5 @@
  #### 5. Connect to Control Plane
  
- 1. Visit **https://app.agno.com**
+ 1. Visit **https://os.agno.com**
  2. Sign in (free account)
  3. Click **"Connect AgentOS"**
```

**Chunk 4**
Lines added: 1, lines removed: 1

```diff
@@ -550,5 +550,5 @@
  1. **Try CLI First (5 min):** &#96;python 01-agno-coordination.py&#96;
  2. **Set Up AgentOS (10 min):** &#96;bash start-agentos.sh&#96;
- 3. **Explore Control Plane:** https://app.agno.com
+ 3. **Explore Control Plane:** https://os.agno.com
  4. **Test API:** http://localhost:7777/docs
  5. **Deploy to Production:** Follow deployment guide above
```

**Chunk 5**
Lines added: 1, lines removed: 1

```diff
@@ -558,5 +558,5 @@
  - **Agno Documentation:** https://docs.agno.com
  - **AgentOS Guide:** https://docs.agno.com/agent-os/introduction
- - **Control Plane:** https://app.agno.com
+ - **Control Plane:** https://os.agno.com
  - **API Reference:** https://docs.agno.com/reference-api/overview
  - **Discord Support:** https://discord.gg/agno
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! Now let me also check the ARCHITECTURE.md file for any occurrences.</details></think>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "app\.agno\.com" in "agentos-reference/ARCHITECTURE.md" ‚Ä¢ 0 matches</summary>

Output mode: count



</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
There are also 5 occurrences in ARCHITECTURE.md. Let me update those as well.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: agentos-reference/ARCHITECTURE.md</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -8,5 +8,5 @@
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ                         USER'S BROWSER                          ‚îÇ
- ‚îÇ                   https://app.agno.com                          ‚îÇ
+ ‚îÇ                   https://os.agno.com                          ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ HTTPS + WebSocket
```

**Chunk 2**
Lines added: 1, lines removed: 1

```diff
@@ -54,5 +54,5 @@
  USER TYPES: "Should I move from Seattle to Austin?"
      ‚Üì
- Browser ‚Üí Control Plane (app.agno.com)
+ Browser ‚Üí Control Plane (os.agno.com)
      ‚Üì
  Control Plane ‚Üí Your Server (localhost:7777)
```

**Chunk 3**
Lines added: 1, lines removed: 1

```diff
@@ -210,5 +210,5 @@
           ‚îÇ
      Control Plane
-     app.agno.com
+     os.agno.com
  &#96;&#96;&#96;
  
```

**Chunk 4**
Lines added: 1, lines removed: 1

```diff
@@ -240,5 +240,5 @@
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   Control Plane    ‚îÇ
-             ‚îÇ   app.agno.com     ‚îÇ
+             ‚îÇ   os.agno.com     ‚îÇ
              ‚îÇ                    ‚îÇ
              ‚îÇ   Users connect    ‚îÇ
```

**Chunk 5**
Lines added: 1, lines removed: 1

```diff
@@ -329,5 +329,5 @@
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ         Frontend (Browser)              ‚îÇ
- ‚îÇ  ‚Ä¢ Control Plane UI (app.agno.com)     ‚îÇ
+ ‚îÇ  ‚Ä¢ Control Plane UI (os.agno.com)     ‚îÇ
  ‚îÇ  ‚Ä¢ WebSocket for real-time updates     ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Perfect! Now all documentation files are updated. Let me create a summary of all the changes I made.</details></think>

---

Perfect! All updates complete. Now try running the script again:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: bash start-agentos.sh</summary>

```bash
bash start-agentos.sh
```

```
$ bash start-agentos.sh
==============================================================================
üöÄ AgentOS Quick Start for 'Should I Move?' Application
==============================================================================

‚úÖ Python found: Python 3.13.7

‚úÖ .env file found

‚úÖ Docker found: Docker version 28.5.1, build e180ab8

‚úÖ PostgreSQL container already running

üîß Activating virtual environment...
üì• Installing dependencies...
‚úÖ Dependencies installed


==============================================================================
üéâ Setup Complete! Starting AgentOS...
==============================================================================

üìã Available Resources:
   - Agents: Cost Analyst, Sentiment Analyst, Migration Researcher
   - Team: City Move Decision Team
   - Knowledge Base: City Relocation Data

üåê Server Information:
   - Local URL: http://localhost:7777
   - API Docs: http://localhost:7777/docs

üîó Next Steps:
   1. Visit https://os.agno.com to access the Control Plane
   2. Click 'Connect AgentOS' and enter: http://localhost:7777
   3. Start chatting with your agents through the web interface!

==============================================================================  

Press Ctrl+C to stop the server

Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 33, in &lt;module&gt;
    from agno.knowledge.text import TextKnowledgeBase
ModuleNotFoundError: No module named 'agno.knowledge.text'
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Now there's a different import error - `agno.knowledge.text` module is not found. Let me search the Agno docs for the correct knowledge base import.</details></think>

---

Another module path issue. Let me check the correct knowledge base import:

---

<tool-use data-tool-type="mcp" data-tool-name="mcp_docs-agno_SearchAgno">
<details>
          <summary>Tool use: **mcp_docs-agno_SearchAgno**</summary>
      
*Called tool*: docs-agno - SearchAgno: Search across the Agno knowledge base to find relevant information, code examples, API references, and guides. Use this tool when you need to answer questions about Agno, find specific documentation, understand how features work, or locate implementation details. The search returns contextual content with titles and direct links to the documentation pages.

*Parameters*:
  * query: TextKnowledgeBase knowledge base import

*Result*:
Title: Knowledge Base Architecture
Link: https://docs.agno.com/concepts/knowledge/core-concepts/knowledge-bases
Content: Knowledge bases in Agno are architecturally designed for AI agent retrieval, with specialized components that bridge the gap between raw data storage and intelligent information access.

Here's how the different pieces work together: Content Ingestion Raw content is processed through readers that understand different file formats (PDF, websites, databases, etc.) and extract meaningful text. Intelligent Chunking Large documents are broken down into smaller, meaningful pieces using chunking strategies that preserve context while enabling precise retrieval. Embedding Generation Each chunk is converted into a vector embedding that captures its semantic meaning using embedders powered by language models. Vector Storage Embeddings are stored in vector databases optimized for similarity search, often with support for hybrid search combining semantic and keyword matching. Intelligent Retrieval When agents need information, they generate search queries, find similar embeddings, and retrieve the most relevant content chunks.

Getting Started with Knowledge Bases
Ready to build your own knowledge base? The process is straightforward: from agno.knowledge.knowledge import Knowledge
from agno.vectordb.pgvector import PgVector
from agno.embedder.openai import OpenAIEmbedder

# Customized knowledge base
knowledge = Knowledge(
    vector_db=PgVector(
        table_name="company_knowledge",
        embedder=OpenAIEmbedder(model="text-embedding-3-large")
    )
)



*Result*:
Title: Deep Knowledge Agent
Link: https://docs.agno.com/examples/models/groq/deep_knowledge
Content: Code
"""ü§î DeepKnowledge - An AI Agent that iteratively searches a knowledge base to answer questions

This agent performs iterative searches through its knowledge base, breaking down complex
queries into sub-questions, and synthesizing comprehensive answers. It's designed to explore
topics deeply and thoroughly by following chains of reasoning.

In this example, the agent uses the Agno documentation as a knowledge base

Key Features:
- Iteratively searches a knowledge base
- Source attribution and citations
"""

from textwrap import dedent
from typing import List, Optional

import inquirer
import typer
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.groq import Groq
from agno.vectordb.lancedb import LanceDb, SearchType
from rich import print


def initialize_knowledge_base():
    """Initialize the knowledge base with your preferred documentation or knowledge source
    Here we use Agno docs as an example, but you can replace with any relevant URLs
    """
    agent_knowledge = Knowledge(
        vector_db=LanceDb(
            uri="tmp/lancedb",
            table_name="deep_knowledge_knowledge",
            search_type=SearchType.hybrid,
            embedder=OpenAIEmbedder(id="text-embedding-3-small"),
        ),
    )
    agent_knowledge.add_content(url="https://docs.agno.com/llms-full.txt")
    return agent_knowledge


def get_db():
    return SqliteDb(db_file="tmp/agents.db")


def create_agent(session_id: Optional[str] = None) -> Agent:
    """Create and return a configured DeepKnowledge agent."""
    agent_knowledge = initialize_knowledge_base()
    db = get_db()
    return Agent(
        name="DeepKnowledge",
        session_id=session_id,
        model=Groq(id="llama-3.3-70b-versatile"),
        description=dedent("""\
        You are DeepKnowledge, an advanced reasoning agent designed to provide thorough,
        well-researched answers to any query by searching your knowledge base.

        Your strengths include:
        - Breaking down complex topics into manageable components
        - Connecting information across multiple domains
        - Providing nuanced, well-researched answers
        - Maintaining intellectual honesty and citing sources
        - Explaining complex concepts in clear, accessible terms"""),
        instructions=dedent("""\
        Your mission is to leave no stone unturned in your pursuit of the correct answer.

        To achieve this, follow these steps:
        1. **Analyze the input and break it down into key components**.
        2. **Search terms**: You must identify at least 3-5 key search terms to search for.
        3. **Initial Search:** Searching your knowledge base for relevant information. You must make atleast 3 searches to get all relevant information.
        4. **Evaluation:** If the answer from the knowledge base is incomplete, ambiguous, or insufficient - Ask the user for clarification. Do not make informed guesses.
        5. **Iterative Process:**
            - Continue searching your knowledge base till you have a comprehensive answer.
            - Reevaluate the completeness of your answer after each search iteration.
            - Repeat the search process until you are confident that every aspect of the question is addressed.
        4. **Reasoning Documentation:** Clearly document your reasoning process:
            - Note when additional searches were triggered.
            - Indicate which pieces of information came from the knowledge base and where it was sourced from.
            - Explain how you reconciled any conflicting or ambiguous information.
        5. **Final Synthesis:** Only finalize and present your answer once you have verified it through multiple search passes.
            Include all pertinent details and provide proper references.
        6. **Continuous Improvement:** If new, relevant information emerges even after presenting your answer,
            be prepared to update or expand upon your response.

        **Communication Style:**
        - Use clear and concise language.
        - Organize your response with numbered steps, bullet points, or short paragraphs as needed.
        - Be transparent about your search process and cite your sources.
        - Ensure that your final answer is comprehensive and leaves no part of the query unaddressed.

        Remember: **Do not finalize your answer until every angle of the question has been explored.**"""),
        additional_context=dedent("""\
        You should only respond with the final answer and the reasoning process.
        No need to include irrelevant information.

        - User ID: {user_id}
        - Memory: You have access to your previous search results and reasoning process.
        """),
        knowledge=agent_knowledge,
        db=db,
        add_history_to_context=True,
        num_history_runs=3,
        read_chat_history=True,
        markdown=True,
    )


def get_example_topics() -> List[str]:
    """Return a list of example topics for the agent."""
    return [
        "What are AI agents and how do they work in Agno?",
        "What chunking strategies does Agno support for text processing?",
        "How can I implement custom tools in Agno?",
        "How does knowledge retrieval work in Agno?",
        "What types of embeddings does Agno support?",
    ]


def handle_session_selection() -> Optional[str]:
    """Handle session selection and return the selected session ID."""
    db = get_db()

    new = typer.confirm("Do you want to start a new session?", default=True)
    if new:
        return None

    existing_sessions = db.get_sessions()
    if not existing_sessions:
        print("No existing sessions found. Starting a new session.")
        return None

    print("\nExisting sessions:")
    for i, session in enumerate(existing_sessions, 1):
        print(f"{i}. {session.session_id}")  # type: ignore

    session_idx = typer.prompt(
        "Choose a session number to continue (or press Enter for most recent)",
        default=1,
    )

    try:
        return existing_sessions[int(session_idx) - 1].session_id  # type: ignore
    except (ValueError, IndexError):
        return existing_sessions[0].session_id  # type: ignore


def run_interactive_loop(agent: Agent):
    """Run the interactive question-answering loop."""
    example_topics = get_example_topics()

    while True:
        choices = [f"{i + 1}. {topic}" for i, topic in enumerate(example_topics)]
        choices.extend(["Enter custom question...", "Exit"])

        questions = [
            inquirer.List(
                "topic",
                message="Select a topic or ask a different question:",
                choices=choices,
            )
        ]
        answer = inquirer.prompt(questions)

        if answer and answer["topic"] == "Exit":
            break

        if answer and answer["topic"] == "Enter custom question...":
            questions = [inquirer.Text("custom", message="Enter your question:")]
            custom_answer = inquirer.prompt(questions)
            topic = custom_answer["custom"]  # type: ignore
        else:
            topic = example_topics[int(answer["topic"].split(".")[0]) - 1]  # type: ignore

        agent.print_response(topic, stream=True)


def deep_knowledge_agent():
    """Main function to run the DeepKnowledge agent."""

    session_id = handle_session_selection()
    agent = create_agent(session_id)

    print("\nü§î Welcome to DeepKnowledge - Your Advanced Research Assistant! üìö")
    if session_id is None:
        session_id = agent.session_id
        if session_id is not None:
            print(f"[bold green]Started New Session: {session_id}[/bold green]\n")
        else:
            print("[bold green]Started New Session[/bold green]\n")
    else:
        print(f"[bold blue]Continuing Previous Session: {session_id}[/bold blue]\n")

    run_interactive_loop(agent)


if __name__ == "__main__":
    typer.run(deep_knowledge_agent)

Code
"""ü§î DeepKnowledge - An AI Agent that iteratively searches a knowledge base to answer questions

This agent performs iterative searches through its knowledge base, breaking down complex
queries into sub-questions, and synthesizing comprehensive answers. It's designed to explore
topics deeply and thoroughly by following chains of reasoning.

In this example, the agent uses the Agno documentation as a knowledge base

Key Features:
- Iteratively searches a knowledge base
- Source attribution and citations
"""

from textwrap import dedent
from typing import List, Optional

import inquirer
import typer
from agno.agent import Agent
from agno.db.sqlite import SqliteDb
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.groq import Groq
from agno.vectordb.lancedb import LanceDb, SearchType
from rich import print


def initialize_knowledge_base():
    """Initialize the knowledge base with your preferred documentation or knowledge source
    Here we use Agno docs as an example, but you can replace with any relevant URLs
    """
    agent_knowledge = Knowledge(
        vector_db=LanceDb(
            uri="tmp/lancedb",
            table_name="deep_knowledge_knowledge",
            search_type=SearchType.hybrid,
            embedder=OpenAIEmbedder(id="text-embedding-3-small"),
        ),
    )
    agent_knowledge.add_content(url="https://docs.agno.com/llms-full.txt")
    return agent_knowledge


def get_db():
    return SqliteDb(db_file="tmp/agents.db")


def create_agent(session_id: Optional[str] = None) -> Agent:
    """Create and return a configured DeepKnowledge agent."""
    agent_knowledge = initialize_knowledge_base()
    db = get_db()
    return Agent(
        name="DeepKnowledge",
        session_id=session_id,
        model=Groq(id="llama-3.3-70b-versatile"),
        description=dedent("""\
        You are DeepKnowledge, an advanced reasoning agent designed to provide thorough,
        well-researched answers to any query by searching your knowledge base.

        Your strengths include:
        - Breaking down complex topics into manageable components
        - Connecting information across multiple domains
        - Providing nuanced, well-researched answers
        - Maintaining intellectual honesty and citing sources
        - Explaining complex concepts in clear, accessible terms"""),
        instructions=dedent("""\
        Your mission is to leave no stone unturned in your pursuit of the correct answer.

        To achieve this, follow these steps:
        1. **Analyze the input and break it down into key components**.
        2. **Search terms**: You must identify at least 3-5 key search terms to search for.
        3. **Initial Search:** Searching your knowledge base for relevant information. You must make atleast 3 searches to get all relevant information.
        4. **Evaluation:** If the answer from the knowledge base is incomplete, ambiguous, or insufficient - Ask the user for clarification. Do not make informed guesses.
        5. **Iterative Process:**
            - Continue searching your knowledge base till you have a comprehensive answer.
            - Reevaluate the completeness of your answer after each search iteration.
            - Repeat the search process until you are confident that every aspect of the question is addressed.
        4. **Reasoning Documentation:** Clearly document your reasoning process:
            - Note when additional searches were triggered.
            - Indicate which pieces of information came from the knowledge base and where it was sourced from.
            - Explain how you reconciled any conflicting or ambiguous information.
        5. **Final Synthesis:** Only finalize and present your answer once you have verified it through multiple search passes.
            Include all pertinent details and provide proper references.
        6. **Continuous Improvement:** If new, relevant information emerges even after presenting your answer,
            be prepared to update or expand upon your response.

        **Communication Style:**
        - Use clear and concise language.
        - Organize your response with numbered steps, bullet points, or short paragraphs as needed.
        - Be transparent about your search process and cite your sources.
        - Ensure that your final answer is comprehensive and leaves no part of the query unaddressed.

        Remember: **Do not finalize your answer until every angle of the question has been explored.**"""),
        additional_context=dedent("""\
        You should only respond with the final answer and the reasoning process.
        No need to include irrelevant information.

        - User ID: {user_id}
        - Memory: You have access to your previous search results and reasoning process.
        """),
        knowledge=agent_knowledge,
        db=db,
        add_history_to_context=True,
        num_history_runs=3,
        read_chat_history=True,
        markdown=True,
    )


def get_example_topics() -> List[str]:
    """Return a list of example topics for the agent."""
    return [
        "What are AI agents and how do they work in Agno?",
        "What chunking strategies does Agno support for text processing?",
        "How can I implement custom tools in Agno?",
        "How does knowledge retrieval work in Agno?",
        "What types of embeddings does Agno support?",
    ]


def handle_session_selection() -> Optional[str]:
    """Handle session selection and return the selected session ID."""
    db = get_db()

    new = typer.confirm("Do you want to start a new session?", default=True)
    if new:
        return None

    existing_sessions = db.get_sessions()
    if not existing_sessions:
        print("No existing sessions found. Starting a new session.")
        return None

    print("\nExisting sessions:")
    for i, session in enumerate(existing_sessions, 1):
        print(f"{i}. {session.session_id}")  # type: ignore

    session_idx = typer.prompt(
        "Choose a session number to continue (or press Enter for most recent)",
        default=1,
    )

    try:
        return existing_sessions[int(session_idx) - 1].session_id  # type: ignore
    except (ValueError, IndexError):
        return existing_sessions[0].session_id  # type: ignore


def run_interactive_loop(agent: Agent):
    """Run the interactive question-answering loop."""
    example_topics = get_example_topics()

    while True:
        choices = [f"{i + 1}. {topic}" for i, topic in enumerate(example_topics)]
        choices.extend(["Enter custom question...", "Exit"])

        questions = [
            inquirer.List(
                "topic",
                message="Select a topic or ask a different question:",
                choices=choices,
            )
        ]
        answer = inquirer.prompt(questions)

        if answer and answer["topic"] == "Exit":
            break

        if answer and answer["topic"] == "Enter custom question...":
            questions = [inquirer.Text("custom", message="Enter your question:")]
            custom_answer = inquirer.prompt(questions)
            topic = custom_answer["custom"]  # type: ignore
        else:
            topic = example_topics[int(answer["topic"].split(".")[0]) - 1]  # type: ignore

        agent.print_response(topic, stream=True)


def deep_knowledge_agent():
    """Main function to run the DeepKnowledge agent."""

    session_id = handle_session_selection()
    agent = create_agent(session_id)

    print("\nü§î Welcome to DeepKnowledge - Your Advanced Research Assistant! üìö")
    if session_id is None:
        session_id = agent.session_id
        if session_id is not None:
            print(f"[bold green]Started New Session: {session_id}[/bold green]\n")
        else:
            print("[bold green]Started New Session[/bold green]\n")
    else:
        print(f"[bold blue]Continuing Previous Session: {session_id}[/bold blue]\n")

    run_interactive_loop(agent)


if __name__ == "__main__":
    typer.run(deep_knowledge_agent)

Usage
Set your API key Install libraries Run Agent python cookbook/models/groq/deep_knowledge.py



*Result*:
Title: Agent with Knowledge Base
Link: https://docs.agno.com/examples/models/azure/openai/knowledge
Content: Code
import asyncio
from agno.agent import Agent
from agno.knowledge.embedder.azure_openai import AzureOpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.azure import AzureOpenAI
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        embedder=AzureOpenAIEmbedder(),
    ),
)
# Add content to the knowledge
asyncio.run(knowledge.add_content_async(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
))

agent = Agent(
    model=AzureOpenAI(id="gpt-5-mini"),
    knowledge=knowledge,
)
agent.print_response("How to make Thai curry?", markdown=True)

Code
import asyncio
from agno.agent import Agent
from agno.knowledge.embedder.azure_openai import AzureOpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.azure import AzureOpenAI
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        embedder=AzureOpenAIEmbedder(),
    ),
)
# Add content to the knowledge
asyncio.run(knowledge.add_content_async(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
))

agent = Agent(
    model=AzureOpenAI(id="gpt-5-mini"),
    knowledge=knowledge,
)
agent.print_response("How to make Thai curry?", markdown=True)



*Result*:
Title: Agent with Knowledge Base
Link: https://docs.agno.com/examples/models/azure/ai_foundry/knowledge
Content: Code
"""Run `pip install ddgs sqlalchemy pgvector pypdf openai` to install dependencies."""
import asyncio
from agno.agent import Agent
from agno.knowledge.embedder.azure_openai import AzureOpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.azure import AzureAIFoundry
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        embedder=AzureOpenAIEmbedder(),
    ),
)
# Add content to the knowledge
asyncio.run(knowledge.add_content_async(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
))

agent = Agent(
    model=AzureAIFoundry(id="Cohere-command-r-08-2024"),
    knowledge=knowledge,
)
agent.print_response("How to make Thai curry?", markdown=True)

Code
"""Run `pip install ddgs sqlalchemy pgvector pypdf openai` to install dependencies."""
import asyncio
from agno.agent import Agent
from agno.knowledge.embedder.azure_openai import AzureOpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.azure import AzureAIFoundry
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        embedder=AzureOpenAIEmbedder(),
    ),
)
# Add content to the knowledge
asyncio.run(knowledge.add_content_async(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
))

agent = Agent(
    model=AzureAIFoundry(id="Cohere-command-r-08-2024"),
    knowledge=knowledge,
)
agent.print_response("How to make Thai curry?", markdown=True)

Usage
Set your API key Install libraries Run PgVector Run Agent python cookbook/models/azure/ai_foundry/knowledge.py



*Result*:
Title: Couchbase Agent Knowledge
Link: https://docs.agno.com/concepts/vectordb/couchbase
Content: Local Setup (Docker)
Run Couchbase locally using Docker: docker run -d --name couchbase-server \
  -p 8091-8096:8091-8096 \
  -p 11210:11210 \
  -e COUCHBASE_ADMINISTRATOR_USERNAME=Administrator \
  -e COUCHBASE_ADMINISTRATOR_PASSWORD=password \
  couchbase:latest

Example
Async Support ‚ö° Couchbase also supports asynchronous operations, enabling concurrency and leading to better performance. import asyncio
import os
import time
from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.couchbase import CouchbaseSearch
from couchbase.options import ClusterOptions, KnownConfigProfiles
from couchbase.auth import PasswordAuthenticator
from couchbase.management.search import SearchIndex

# Couchbase connection settings
username = os.getenv("COUCHBASE_USER")
password = os.getenv("COUCHBASE_PASSWORD")
connection_string = os.getenv("COUCHBASE_CONNECTION_STRING")

# Create cluster options with authentication
auth = PasswordAuthenticator(username, password)
cluster_options = ClusterOptions(auth)
cluster_options.apply_profile(KnownConfigProfiles.WanDevelopment)

knowledge_base = Knowledge(
    vector_db=CouchbaseSearch(
        bucket_name="recipe_bucket",
        scope_name="recipe_scope",
        collection_name="recipes",
        couchbase_connection_string=connection_string,
        cluster_options=cluster_options,
        search_index="vector_search_fts_index",
        embedder=OpenAIEmbedder(
            id="text-embedding-3-large", 
            dimensions=3072, 
            api_key=os.getenv("OPENAI_API_KEY")
        ),
        wait_until_index_ready=60,
        overwrite=True
    ),
)

# Create and use the agent
agent = Agent(knowledge=knowledge_base)

async def run_agent():
    await knowledge_base.add_content_async(
      url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
    )
    time.sleep(5)  # Wait for the vector index to sync with KV
    await agent.aprint_response("How to make Thai curry?", markdown=True)

if __name__ == "__main__":
    asyncio.run(run_agent())

Example
import os
import time
from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.couchbase import CouchbaseSearch
from couchbase.options import ClusterOptions, KnownConfigProfiles
from couchbase.auth import PasswordAuthenticator
from couchbase.management.search import SearchIndex

# Couchbase connection settings
username = os.getenv("COUCHBASE_USER")
password = os.getenv("COUCHBASE_PASSWORD")
connection_string = os.getenv("COUCHBASE_CONNECTION_STRING")

# Create cluster options with authentication
auth = PasswordAuthenticator(username, password)
cluster_options = ClusterOptions(auth)
cluster_options.apply_profile(KnownConfigProfiles.WanDevelopment)


knowledge_base = Knowledge(
    vector_db=CouchbaseSearch(
        bucket_name="recipe_bucket",
        scope_name="recipe_scope",
        collection_name="recipes",
        couchbase_connection_string=connection_string,
        cluster_options=cluster_options,
        search_index="vector_search_fts_index",
        embedder=OpenAIEmbedder(
            id="text-embedding-3-large", 
            dimensions=3072, 
            api_key=os.getenv("OPENAI_API_KEY")
        ),
        wait_until_index_ready=60,
        overwrite=True
    ),
)

# Load the knowledge base
knowledge_base.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

# Wait for the vector index to sync with KV
time.sleep(20)

# Create and use the agent
agent = Agent(knowledge=knowledge_base)
agent.print_response("How to make Thai curry?", markdown=True)



*Result*:
Title: Agent with Knowledge Base
Link: https://docs.agno.com/examples/models/cerebras/knowledge
Content: Code
from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.models.cerebras import Cerebras
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    vector_db=PgVector(table_name="recipes", db_url=db_url),
)
# Add content to the knowledge
knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

agent = Agent(model=Cerebras(id="llama-4-scout-17b-16e-instruct"), knowledge=knowledge)
agent.print_response("How to make Thai curry?", markdown=True)

Code
from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.models.cerebras import Cerebras
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    vector_db=PgVector(table_name="recipes", db_url=db_url),
)
# Add content to the knowledge
knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

agent = Agent(model=Cerebras(id="llama-4-scout-17b-16e-instruct"), knowledge=knowledge)
agent.print_response("How to make Thai curry?", markdown=True)

Usage
Set your API key Install libraries Start your Postgres server Ensure your Postgres server is running and accessible at the connection string used in db_url. Run Agent (first time) The first run will load and index the PDF. This may take a while. Subsequent Runs After the first run, comment out or remove knowledge_base.load(recreate=True) to avoid reloading the PDF each time.



*Result*:
Title: Team with Knowledge Base
Link: https://docs.agno.com/examples/concepts/teams/knowledge/team_with_knowledge
Content: This example demonstrates how to create a team with knowledge base integration. The team has access to a knowledge base with Agno documentation and can combine this knowledge with web search capabilities.

Team with Knowledge Base
This example demonstrates how to create a team with knowledge base integration. The team has access to a knowledge base with Agno documentation and can combine this knowledge with web search capabilities.

Code
"""
This example demonstrates how to create a team with knowledge base integration.

The team has access to a knowledge base with Agno documentation and can combine
this knowledge with web search capabilities.
"""

from pathlib import Path

from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.team import Team
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.vectordb.lancedb import LanceDb, SearchType

# Setup paths for knowledge storage
cwd = Path(__file__).parent
tmp_dir = cwd.joinpath("tmp")
tmp_dir.mkdir(parents=True, exist_ok=True)

# Initialize knowledge base with vector database
agno_docs_knowledge = Knowledge(
    vector_db=LanceDb(
        uri=str(tmp_dir.joinpath("lancedb")),
        table_name="agno_docs",
        search_type=SearchType.hybrid,
        embedder=OpenAIEmbedder(id="text-embedding-3-small"),
    ),
)

# Add content to knowledge base
agno_docs_knowledge.add_content(url="https://docs.agno.com/llms-full.txt")

# Create web search agent for supplementary information
web_agent = Agent(
    name="Web Search Agent",
    role="Handle web search requests",
    model=OpenAIChat(id="gpt-5-mini"),
    tools=[DuckDuckGoTools()],
    instructions=["Always include sources"],
)

# Create team with knowledge base integration
team_with_knowledge = Team(
    name="Team with Knowledge",
    members=[web_agent],
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=agno_docs_knowledge,
    show_members_responses=True,
    markdown=True,
)

if __name__ == "__main__":
    team_with_knowledge.print_response("Tell me about the Agno framework", stream=True)



*Result*:
Title: Knowledge Base
Link: https://docs.agno.com/concepts/knowledge/core-concepts/terminology
Content: A structured repository of information that agents can search and retrieve from at runtime. Contains processed content optimized for AI understanding and retrieval.

Example: Dynamic Few-Shot Learning in Action
Scenario:  Building a Text-to-SQL Agent Instead of cramming all table schemas, column names, and example queries into the system prompt, you store this information in a knowledge base. When a user asks for data, the agent: Analyzes the request Searches for relevant schema information and example queries Uses the retrieved context to generate the best possible SQL query This is "dynamic" because the agent gets exactly the information it needs for each specific query, and "few-shot" because it learns from examples retrieved at runtime.

Dynamic Few-Shot Learning
The pattern where agents retrieve specific examples or context at runtime to improve their performance on tasks, rather than having all information provided upfront. Scenario: Building a Text-to-SQL Agent Instead of cramming all table schemas, column names, and example queries into the system prompt, you store this information in a knowledge base. When a user asks for data, the agent: Analyzes the request Searches for relevant schema information and example queries Uses the retrieved context to generate the best possible SQL query This is "dynamic" because the agent gets exactly the information it needs for each specific query, and "few-shot" because it learns from examples retrieved at runtime.



*Result*:
Title: Knowledge
Link: https://docs.agno.com/how-to/v2-changelog
Content: Knowledge has been completely reworked. See full details in the Knowledge section. You now define a single Knowledge instance for all types of content. Files (PDF, CSV, etc.), URLs, and other. The agent can still use your knowledge base to search for information at runtime. All existing RAG implementations are still supported. Added full async support for embedding models and vector DBs. This has a significant impact on performance and is a major speed improvement when adding content to the knowledge base using knowledge.add_content_async(...). AgentKnowledge and all other knowledge base classes have been removed. Import locations for embedder , document , chunking , reranker and reader have been moved to agno.knowledge . See examples for more details.

Updates to 
knowledge  is now an instance of  Knowledge  instead of  AgentKnowledge . retriever  ->  knowledge_retriever  -> For a custom retriever. add_references  ->  add_knowledge_to_context  -> To enable traditional RAG. Added  update_knowledge  tool to update the knowledge base. Works the same as for  Agent .

Updates to 
knowledge  is now an instance of  Knowledge  instead of  AgentKnowledge . retriever  ->  knowledge_retriever  -> For a custom retriever. add_references  ->  add_knowledge_to_context  -> To enable traditional RAG.



*Result*:
Title: Step 1: Set Up Your Knowledge Base
Link: https://docs.agno.com/concepts/knowledge/getting-started
Content: First, let's create a knowledge base with a vector database to store your information: from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.pgvector import PgVector
from agno.models.openai import OpenAIChat

# Create a knowledge base with PgVector
knowledge = Knowledge(
    vector_db=PgVector(
        table_name="knowledge_documents",
        db_url="postgresql+psycopg://ai:ai@localhost:5532/ai"
    ),
)

# Create an agent with knowledge
agent = Agent(
    model=OpenAIChat(id="gpt-4o-mini"),
    knowledge=knowledge,
    # Enable automatic knowledge search
    search_knowledge=True,
    instructions=[
        "Always search your knowledge base before answering questions",
        "Include source references in your responses when possible"
    ]
)

First, let's create a knowledge base with a vector database to store your information: For a quick start without setting up PostgreSQL, use LanceDB which stores data locally: from agno.vectordb.lancedb import LanceDb

# Local vector storage - no database setup required
knowledge = Knowledge(
    vector_db=LanceDb(
        table_name="knowledge_documents",
        uri="tmp/lancedb"  # Local directory for storage
    ),
)

First, let's create a knowledge base with a vector database to store your information: For a quick start without setting up PostgreSQL, use LanceDB which stores data locally:


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
Perfect! The correct import is `from agno.knowledge.knowledge import Knowledge` (not `from agno.knowledge.text import TextKnowledgeBase`). Let me update this.</details></think>

---

Found it! The import should be `Knowledge` from `agno.knowledge.knowledge`:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -31,5 +31,5 @@
  from agno.tools.local_file_system import LocalFileSystemTools
  from agno.db.postgres import PostgresDb
- from agno.knowledge.text import TextKnowledgeBase
+ from agno.knowledge.knowledge import Knowledge
  from agno.memory.db.postgres import PgMemoryDb
  from agno.vectordb.pgvector import PgVector
```

</details>

</tool-use>

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "TextKnowledgeBase" in "04-agno-agentos.py" ‚Ä¢ 1 match</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `04-agno-agentos.py` | `relocation_knowledge = TextKnowledgeBase(` | L76 |


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




I need to update the usage of `TextKnowledgeBase` to `Knowledge`. Let me find where it's used and update it.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




The API has changed. Looking at the examples, `Knowledge` doesn't take a `path` parameter directly. Instead, you create the `Knowledge` instance with a `vector_db`, and then add content using `knowledge.add_content()`. Let me update this.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 3, lines removed: 3

```diff
@@ -74,9 +74,9 @@
  
  # Create a knowledge base with city relocation information
- relocation_knowledge = TextKnowledgeBase(
-     path="data",  # Load from data directory
+ relocation_knowledge = Knowledge(
      vector_db=vector_db,
-     reader=None,  # Will auto-detect file types
  )
+ # Note: Content should be added using relocation_knowledge.add_content() 
+ # after the knowledge base is created
  
  # ============================================================================
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Good! Now let me run the script again to see if there are any more errors.</details></think>

---

Now let's test again:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: python 04-agno-agentos.py</summary>

```bash
python 04-agno-agentos.py
```

```
$ python 04-agno-agentos.py
Traceback (most recent call last):
  File "C:\Users\ahmed\AppData\Roaming\Python\Python313\site-packages\agno\tools\firecrawl.py", line 9, in &lt;module&gt;                                             
    from firecrawl import FirecrawlApp  # type: ignore[attr-defined]
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'firecrawl'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 30, in &lt;module&gt;     
    from agno.tools.firecrawl import FirecrawlTools
  File "C:\Users\ahmed\AppData\Roaming\Python\Python313\site-packages\agno\tools\firecrawl.py", line 12, in &lt;module&gt;                                            
    raise ImportError("&#96;firecrawl-py&#96; not installed. Please install using &#96;pip install firecrawl-py&#96;")                                                          
ImportError: &#96;firecrawl-py&#96; not installed. Please install using &#96;pip install firecrawl-py&#96;                                                                      
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
The firecrawl-py package is not installed in the system Python (it's trying to use the global Python, not the venv). But wait, it's trying to import from the user's AppData folder, which means it's using the global Python instead of the venv. Let me activate the venv first.</details></think>

---

The script is using the wrong Python (global instead of venv). Let's run it with the venv Python:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




The command is running in the background. Let me wait a moment and check if the server started successfully.</details></think>

---

Let me check if the server started successfully:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: sleep 3 && curl -s http://localhost:7777/health || echo "Server not ready yet"</summary>

```bash
sleep 3 && curl -s http://localhost:7777/health || echo "Server not ready yet"
```

```
Server not ready yet
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




The server is not ready yet. Let me check the background process to see if there are any errors.</details></think>

---

Let me check the process status and logs:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: ps aux | grep "04-agno-agentos.py" | grep -v grep</summary>

```bash
ps aux | grep "04-agno-agentos.py" | grep -v grep
```

```
$ ps aux | grep "04-agno-agentos.py" | grep -v grep
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




The process is not running, which means it probably crashed. Let me run it in the foreground to see the error.</details></think>

---

The process isn't running. Let me run it in the foreground to see the error:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -50</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -50
```

```
$ .venv/Scripts/python.exe 04-agno-agentos.py 2&gt;&amp;1 | head -50
Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 34, in &lt;module&gt;
    from agno.memory.db.postgres import PgMemoryDb
ModuleNotFoundError: No module named 'agno.memory.db'
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Another import issue - `agno.memory.db.postgres` doesn't exist. Let me search for the correct memory import path.</details></think>

---

Another import issue. Let me find the correct memory import:

---

<tool-use data-tool-type="mcp" data-tool-name="mcp_docs-agno_SearchAgno">
<details>
          <summary>Tool use: **mcp_docs-agno_SearchAgno**</summary>
      
*Called tool*: docs-agno - SearchAgno: Search across the Agno knowledge base to find relevant information, code examples, API references, and guides. Use this tool when you need to answer questions about Agno, find specific documentation, understand how features work, or locate implementation details. The search returns contextual content with titles and direct links to the documentation pages.

*Parameters*:
  * query: PgMemoryDb memory postgres import

*Result*:
Title: Memory with PostgreSQL
Link: https://docs.agno.com/examples/concepts/memory/db/mem-postgres-memory
Content: Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb

# Setup Postgres
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    db=db,
    enable_user_memories=True,
)

agent.print_response("My name is John Doe and I like to play basketball on the weekends.")
agent.print_response("What's do I do in weekends?")

Code
from agno.agent import Agent
from agno.db.postgres import PostgresDb

# Setup Postgres
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    db=db,
    enable_user_memories=True,
)

agent.print_response("My name is John Doe and I like to play basketball on the weekends.")
agent.print_response("What's do I do in weekends?")

Usage
Set environment variables Install libraries Run Example python cookbook/memory/db/mem-postgres-memory.py



*Result*:
Title: InMemoryDb
Link: https://docs.agno.com/reference/storage/in_memory
Content: InMemoryDb is a class that implements the Db interface using an in-memory database. It provides lightweight, in-memory storage for agent/team sessions.

InMemoryDb
InMemoryDb is a class that implements the Db interface using an in-memory database. It provides lightweight, in-memory storage for agent/team sessions.



*Result*:
Title: Standalone Memory
Link: https://docs.agno.com/examples/concepts/memory/memory_manager/01-standalone-memory
Content: Code
from agno.db.postgres import PostgresDb
from agno.memory import MemoryManager, UserMemory
from rich.pretty import pprint

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

memory = MemoryManager(db=PostgresDb(db_url=db_url))

# Add a memory for the default user
memory.add_user_memory(
    memory=UserMemory(memory="The user's name is John Doe", topics=["name"]),
)
print("Memories:")
pprint(memory.get_user_memories())

# Add memories for Jane Doe
jane_doe_id = "jane_doe@example.com"
print(f"\nUser: {jane_doe_id}")
memory_id_1 = memory.add_user_memory(
    memory=UserMemory(memory="The user's name is Jane Doe", topics=["name"]),
    user_id=jane_doe_id,
)
memory_id_2 = memory.add_user_memory(
    memory=UserMemory(memory="She likes to play tennis", topics=["hobbies"]),
    user_id=jane_doe_id,
)
memories = memory.get_user_memories(user_id=jane_doe_id)
print("Memories:")
pprint(memories)

# Delete a memory
print("\nDeleting memory")
assert memory_id_2 is not None
memory.delete_user_memory(user_id=jane_doe_id, memory_id=memory_id_2)
print("Memory deleted\n")
memories = memory.get_user_memories(user_id=jane_doe_id)
print("Memories:")
pprint(memories)

# Replace a memory
print("\nReplacing memory")
assert memory_id_1 is not None
memory.replace_user_memory(
    memory_id=memory_id_1,
    memory=UserMemory(memory="The user's name is Jane Mary Doe", topics=["name"]),
    user_id=jane_doe_id,
)
print("Memory replaced")
memories = memory.get_user_memories(user_id=jane_doe_id)
print("Memories:")
pprint(memories)

Code
from agno.db.postgres import PostgresDb
from agno.memory import MemoryManager, UserMemory
from rich.pretty import pprint

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

memory = MemoryManager(db=PostgresDb(db_url=db_url))

# Add a memory for the default user
memory.add_user_memory(
    memory=UserMemory(memory="The user's name is John Doe", topics=["name"]),
)
print("Memories:")
pprint(memory.get_user_memories())

# Add memories for Jane Doe
jane_doe_id = "jane_doe@example.com"
print(f"\nUser: {jane_doe_id}")
memory_id_1 = memory.add_user_memory(
    memory=UserMemory(memory="The user's name is Jane Doe", topics=["name"]),
    user_id=jane_doe_id,
)
memory_id_2 = memory.add_user_memory(
    memory=UserMemory(memory="She likes to play tennis", topics=["hobbies"]),
    user_id=jane_doe_id,
)
memories = memory.get_user_memories(user_id=jane_doe_id)
print("Memories:")
pprint(memories)

# Delete a memory
print("\nDeleting memory")
assert memory_id_2 is not None
memory.delete_user_memory(user_id=jane_doe_id, memory_id=memory_id_2)
print("Memory deleted\n")
memories = memory.get_user_memories(user_id=jane_doe_id)
print("Memories:")
pprint(memories)

# Replace a memory
print("\nReplacing memory")
assert memory_id_1 is not None
memory.replace_user_memory(
    memory_id=memory_id_1,
    memory=UserMemory(memory="The user's name is Jane Mary Doe", topics=["name"]),
    user_id=jane_doe_id,
)
print("Memory replaced")
memories = memory.get_user_memories(user_id=jane_doe_id)
print("Memories:")
pprint(memories)

Usage
Install libraries Run Example python cookbook/memory/memory_manager/01_standalone_memory.py



*Result*:
Title: PgVector
Link: https://docs.agno.com/examples/concepts/vectordb/pgvector/pgvector-db
Content: Code
from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

vector_db = PgVector(table_name="vectors", db_url=db_url)

knowledge = Knowledge(
    name="My PG Vector Knowledge Base",
    description="This is a knowledge base that uses a PG Vector DB",
    vector_db=vector_db,
)
knowledge.add_content(
    name="Recipes",
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
    metadata={"doc_type": "recipe_book"},
)

agent = Agent(
    knowledge=knowledge,
    search_knowledge=True,
    read_chat_history=True,
)

agent.print_response("How do I make pad thai?", markdown=True)

vector_db.delete_by_name("Recipes")

vector_db.delete_by_metadata({"doc_type": "recipe_book"})

Code
from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.pgvector import 

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

vector_db = PgVector(table_name="vectors", db_url=db_url)

knowledge = Knowledge(
    name="My PG Vector Knowledge Base",
    description="This is a knowledge base that uses a PG Vector DB",
    vector_db=vector_db,
)
knowledge.add_content(
    name="Recipes",
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
    metadata={"doc_type": "recipe_book"},
)

agent = Agent(
    knowledge=knowledge,
    search_knowledge=True,
    read_chat_history=True,
)

agent.print_response("How do I make pad thai?", markdown=True)

vector_db.delete_by_name("Recipes")

vector_db.delete_by_metadata({"doc_type": "recipe_book"})

Usage
Install libraries Set environment variables Run Agent python cookbook/knowledge/vector_db/pgvector/pgvector_db.py



*Result*:
Title: PgVector Hybrid Search
Link: https://docs.agno.com/examples/concepts/vectordb/pgvector/pgvector-hybrid-search
Content: Code
from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.vectordb.pgvector import PgVector, SearchType

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    name="My PG Vector Knowledge Base",
    description="This is a knowledge base that uses a PG Vector DB",
    vector_db=PgVector(
        table_name="vectors", db_url=db_url, search_type=SearchType.hybrid
    ),
)

knowledge.add_content(
    name="Recipes",
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
    metadata={"doc_type": "recipe_book"},
)

agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=knowledge,
    search_knowledge=True,
    read_chat_history=True,
    markdown=True,
)
agent.print_response(
    "How do I make chicken and galangal in coconut milk soup", stream=True
)
agent.print_response("What was my last question?", stream=True)

Code
from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.vectordb.pgvector import PgVector, SearchType

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    name="My PG Vector Knowledge Base",
    description="This is a knowledge base that uses a PG Vector DB",
    vector_db=PgVector(
        table_name="vectors", db_url=db_url, search_type=SearchType.hybrid
    ),
)

knowledge.add_content(
    name="Recipes",
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf",
    metadata={"doc_type": "recipe_book"},
)

agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=knowledge,
    search_knowledge=True,
    read_chat_history=True,
    markdown=True,
)
agent.print_response(
    "How do I make chicken and galangal in coconut milk soup", stream=True
)
agent.print_response("What was my last question?", stream=True)

Usage
Install libraries Set environment variables Run Agent python cookbook/knowledge/vector_db/pgvector/pgvector_hybrid_search.py



*Result*:
Title: PgVector Async
Link: https://docs.agno.com/examples/concepts/vectordb/pgvector/async-pgvector-db
Content: Code
import asyncio

from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

vector_db = PgVector(table_name="recipes", db_url=db_url)

knowledge_base = Knowledge(
    vector_db=vector_db,
)

agent = Agent(knowledge=knowledge_base)

if __name__ == "__main__":

    asyncio.run(
        knowledge_base.add_content_async(url="https://docs.agno.com/introduction/agents.md")
    )


    asyncio.run(
        agent.aprint_response("What is the purpose of an Agno Agent?", markdown=True)
    )

Code
import asyncio

from agno.agent import Agent
from agno.knowledge.knowledge import Knowledge
from agno.vectordb.pgvector import PgVector

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

vector_db = PgVector(table_name="recipes", db_url=db_url)

knowledge_base = Knowledge(
    vector_db=vector_db,
)

agent = Agent(knowledge=knowledge_base)

if __name__ == "__main__":

    asyncio.run(
        knowledge_base.add_content_async(url="https://docs.agno.com/introduction/agents.md")
    )


    asyncio.run(
        agent.aprint_response("What is the purpose of an Agno Agent?", markdown=True)
    )

Usage
Install libraries Set environment variables Run Agent python cookbook/knowledge/vector_db/pgvector/async_pg_vector.py



*Result*:
Title: Memory
Link: https://docs.agno.com/examples/models/openai/responses/memory
Content: Code
"""
This recipe shows how to use personalized memories and summaries in an agent.
Steps:
1. Run: `./cookbook/scripts/run_pgvector.sh` to start a postgres container with pgvector
2. Run: `pip install openai sqlalchemy 'psycopg[binary]' pgvector` to install the dependencies
3. Run: `python cookbook/agents/personalized_memories_and_summaries.py` to run the agent
"""

from agno.agent import Agent
from agno.db.base import SessionType
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIResponses
from rich.pretty import pprint

# Setup the database
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    model=OpenAIResponses(id="gpt-5-mini"),
    user_id="test_user",
    session_id="test_session",
    # Pass the database to the Agent
    db=db,
    # Enable user memories
    enable_user_memories=True,
    # Enable session summaries
    enable_session_summaries=True,
    # Show debug logs so, you can see the memory being created
)

# -*- Share personal information
agent.print_response("My name is john billings?", stream=True)
# -*- Print memories and summary
if agent.db:
    pprint(agent.db.get_user_memories(user_id="test_user"))
    pprint(
        agent.db.get_session(
            session_id="test_session", session_type=SessionType.AGENT
        ).summary  # type: ignore
    )

# -*- Share personal information
agent.print_response("I live in nyc?", stream=True)
# -*- Print memories
if agent.db:
    pprint(agent.db.get_user_memories(user_id="test_user"))
    pprint(
        agent.db.get_session(
            session_id="test_session", session_type=SessionType.AGENT
        ).summary  # type: ignore
    )

# -*- Share personal information
agent.print_response("I'm going to a concert tomorrow?", stream=True)
# -*- Print memories
if agent.db:
    pprint(agent.db.get_user_memories(user_id="test_user"))
    pprint(
        agent.db.get_session(
            session_id="test_session", session_type=SessionType.AGENT
        ).summary  # type: ignore
    )

# Ask about the conversation
agent.print_response(
    "What have we been talking about, do you know my name?", stream=True
)

Code
"""
This recipe shows how to use personalized memories and summaries in an agent.
Steps:
1. Run: `./cookbook/scripts/run_pgvector.sh` to start a postgres container with pgvector
2. Run: `pip install openai sqlalchemy 'psycopg[binary]' pgvector` to install the dependencies
3. Run: `python cookbook/agents/personalized_memories_and_summaries.py` to run the agent
"""

from agno.agent import Agent
from agno.db.base import SessionType
from agno.db.postgres import PostgresDb
from agno.models.openai import OpenAIResponses
from rich.pretty import pprint

# Setup the database
db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
db = PostgresDb(db_url=db_url)

agent = Agent(
    model=OpenAIResponses(id="gpt-5-mini"),
    user_id="test_user",
    session_id="test_session",
    # Pass the database to the Agent
    db=db,
    # Enable user memories
    enable_user_memories=True,
    # Enable session summaries
    enable_session_summaries=True,
    # Show debug logs so, you can see the memory being created
)

# -*- Share personal information
agent.print_response("My name is john billings?", stream=True)
# -*- Print memories and summary
if agent.db:
    pprint(agent.db.get_user_memories(user_id="test_user"))
    pprint(
        agent.db.get_session(
            session_id="test_session", session_type=SessionType.AGENT
        ).summary  # type: ignore
    )

# -*- Share personal information
agent.print_response("I live in nyc?", stream=True)
# -*- Print memories
if agent.db:
    pprint(agent.db.get_user_memories(user_id="test_user"))
    pprint(
        agent.db.get_session(
            session_id="test_session", session_type=SessionType.AGENT
        ).summary  # type: ignore
    )

# -*- Share personal information
agent.print_response("I'm going to a concert tomorrow?", stream=True)
# -*- Print memories
if agent.db:
    pprint(agent.db.get_user_memories(user_id="test_user"))
    pprint(
        agent.db.get_session(
            session_id="test_session", session_type=SessionType.AGENT
        ).summary  # type: ignore
    )

# Ask about the conversation
agent.print_response(
    "What have we been talking about, do you know my name?", stream=True
)

Usage
Set your API key Install libraries Run Agent python cookbook/models/openai/responses/memory.py



*Result*:
Title: PostgresDb
Link: https://docs.agno.com/reference/storage/postgres
Content: PostgresDb is a class that implements the Db interface using PostgreSQL as the backend storage system. It provides robust, relational storage for agent sessions with support for JSONB data types, schema versioning, and efficient querying.

PostgresDb
PostgresDb is a class that implements the Db interface using PostgreSQL as the backend storage system. It provides robust, relational storage for agent sessions with support for JSONB data types, schema versioning, and efficient querying.



*Result*:
Title: Traditional RAG with PgVector
Link: https://docs.agno.com/examples/concepts/knowledge/rag/traditional-rag-pgvector
Content: Code
from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.vectordb.pgvector import PgVector, SearchType

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    # Use PgVector as the vector database and store embeddings in the `ai.recipes` table
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        search_type=SearchType.hybrid,
        embedder=OpenAIEmbedder(id="text-embedding-3-small"),
    ),
)

knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=knowledge,
    # Enable RAG by adding context from the `knowledge` to the user prompt.
    add_knowledge_to_context=True,
    # Set as False because Agents default to `search_knowledge=True`
    search_knowledge=False,
    markdown=True,
)
agent.print_response(
    "How do I make chicken and galangal in coconut milk soup", stream=True
)

Code
from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.vectordb.pgvector import PgVector, SearchType

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"

knowledge = Knowledge(
    # Use PgVector as the vector database and store embeddings in the `ai.recipes` table
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        search_type=SearchType.hybrid,
        embedder=OpenAIEmbedder(id="text-embedding-3-small"),
    ),
)

knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=knowledge,
    # Enable RAG by adding context from the `knowledge` to the user prompt.
    add_knowledge_to_context=True,
    # Set as False because Agents default to `search_knowledge=True`
    search_knowledge=False,
    markdown=True,
)
agent.print_response(
    "How do I make chicken and galangal in coconut milk soup", stream=True
)

Usage
Set your API key Install libraries Run Agent python cookbook/agents/rag/traditional_rag_pgvector.py



*Result*:
Title: Agentic RAG with PgVector
Link: https://docs.agno.com/examples/concepts/knowledge/rag/agentic-rag-pgvector
Content: Code
from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.vectordb.pgvector import PgVector, SearchType

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
knowledge = Knowledge(
    # Use PgVector as the vector database and store embeddings in the `ai.recipes` table
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        search_type=SearchType.hybrid,
        embedder=OpenAIEmbedder(id="text-embedding-3-small"),
    ),
)

knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=knowledge,
    search_knowledge=True,
    markdown=True,
)
agent.print_response(
    "How do I make chicken and galangal in coconut milk soup", stream=True
)

Code
from agno.agent import Agent
from agno.knowledge.embedder.openai import OpenAIEmbedder
from agno.knowledge.knowledge import Knowledge
from agno.models.openai import OpenAIChat
from agno.vectordb.pgvector import PgVector, SearchType

db_url = "postgresql+psycopg://ai:ai@localhost:5532/ai"
knowledge = Knowledge(
    # Use PgVector as the vector database and store embeddings in the `ai.recipes` table
    vector_db=PgVector(
        table_name="recipes",
        db_url=db_url,
        search_type=SearchType.hybrid,
        embedder=OpenAIEmbedder(id="text-embedding-3-small"),
    ),
)

knowledge.add_content(
    url="https://agno-public.s3.amazonaws.com/recipes/ThaiRecipes.pdf"
)

agent = Agent(
    model=OpenAIChat(id="gpt-5-mini"),
    knowledge=knowledge,
    search_knowledge=True,
    markdown=True,
)
agent.print_response(
    "How do I make chicken and galangal in coconut milk soup", stream=True
)

Usage
Set your API key Install libraries Run PgVector docker run -d \
  -e POSTGRES_DB=ai \
  -e POSTGRES_USER=ai \
  -e POSTGRES_PASSWORD=ai \
  -e PGDATA=/var/lib/postgresql/data/pgdata \
  -v pgvolume:/var/lib/postgresql/data \
  -p 5532:5432 \
  --name pgvector \
  agnohq/pgvector:16


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Looking at the examples, it seems that memory is now handled through the `PostgresDb` with `enable_user_memories=True` parameter on the Agent, not through a separate `PgMemoryDb` class. The memory management is built into the `PostgresDb` class.

So I should remove the `PgMemoryDb` import and usage, and instead just use the `PostgresDb` for both session storage and memory. Let me update the code.</details></think>

---

Memory is now handled through the `PostgresDb` with `enable_user_memories=True` on agents. Let me fix this:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: undefined, lines removed: 1

```diff
@@ -32,5 +32,4 @@
  from agno.db.postgres import PostgresDb
  from agno.knowledge.knowledge import Knowledge
- from agno.memory.db.postgres import PgMemoryDb
  from agno.vectordb.pgvector import PgVector
  from pydantic import BaseModel, Field
```

</details>

</tool-use>

---

The string to replace was not found in the file.

---

<think><details><summary>Thought Process</summary>




Let me read the file to see the exact content.</details></think>

---

<tool-use data-tool-type="read" data-tool-name="read_file">
<details><summary>Tool use: **read_file** ‚Ä¢ Read file: 04-agno-agentos.py</summary>

</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




I need to update the code that includes the embedder line.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 2, lines removed: 9

```diff
@@ -49,21 +49,14 @@
  DB_URL = os.getenv("AGENTOS_DB_URL", "postgresql+psycopg://agno:agno@localhost:5532/agno")
  
- # Configure storage for session management
- agent_storage = PostgresDb(
+ # Configure storage for session management and memory
+ agent_db = PostgresDb(
      table_name="agent_sessions",
      db_url=DB_URL,
  )
- 
- # Configure memory database for persistent memory across sessions
- memory_db = PgMemoryDb(
-     table_name="agent_memory",
-     db_url=DB_URL,
- )
  
  # Configure vector database for knowledge base
  vector_db = PgVector(
      table_name="agent_knowledge",
      db_url=DB_URL,
-     embedder=OpenAIChat(model="text-embedding-3-small"),
  )
  
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Now I need to update all references to `agent_storage` and `memory_db` to use `agent_db` instead, and remove the `memory=memory_db` parameters.</details></think>

---

Now update all agent references:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -248,6 +248,6 @@
      tools=[get_cost_of_living_comparison],
      output_schema=CostAnalysis,
-     db=agent_storage,  # Enable session storage
-     memory=memory_db,  # Enable memory persistence
+     db=agent_db,  # Enable session storage
+     enable_user_memories=True,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
      markdown=True,
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -270,6 +270,6 @@
      ],
      output_schema=SentimentAnalysis,
-     db=agent_storage,  # Enable session storage
-     memory=memory_db,  # Enable memory persistence
+     db=agent_db,  # Enable session storage
+     enable_user_memories=True,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
      markdown=True,
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -294,6 +294,6 @@
      tools=[search_reddit_discussions],
      output_schema=MigrationInsights,
-     db=agent_storage,  # Enable session storage
-     memory=memory_db,  # Enable memory persistence
+     db=agent_db,  # Enable session storage
+     enable_user_memories=True,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
      markdown=True,
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -340,6 +340,6 @@
      ],
      output_schema=FinalRecommendation,
-     db=agent_storage,  # Enable session storage
-     memory=memory_db,  # Enable memory persistence
+     db=agent_db,  # Enable session storage
+     enable_user_memories=True,  # Enable memory persistence
      knowledge=relocation_knowledge,  # Attach knowledge base
      add_member_tools_to_context=False,
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Perfect! Now let me test the script again.</details></think>

---

Perfect! Now let's test again:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -100</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -100
```

```
$ .venv/Scripts/python.exe 04-agno-agentos.py 2&gt;&amp;1 | head -100
Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 52, in &lt;module&gt;
    agent_db = PostgresDb(
        table_name="agent_sessions",
        db_url=DB_URL,
    )
TypeError: PostgresDb.__init__() got an unexpected keyword argument 'table_name'
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>
`PostgresDb` doesn't accept `table_name`. Looking at the examples, it just takes `db_url`. Let me fix this.</details></think>

---

`PostgresDb` doesn't accept `table_name`. Let me fix this:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: undefined, lines removed: 1

```diff
@@ -51,5 +51,4 @@
  # Configure storage for session management and memory
  agent_db = PostgresDb(
-     table_name="agent_sessions",
      db_url=DB_URL,
  )
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Good! Now let me test again.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -100</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -100
```

```
$ .venv/Scripts/python.exe 04-agno-agentos.py 2&gt;&amp;1 | head -100
INFO Embedder not provided, using OpenAIEmbedder as default.
Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 81, in &lt;module&gt;
    print(f"\u2705 Loaded {len(CITY_DATABASE)} cities from database")
    ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 0: character maps to &lt;undefined&gt;                                                
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Windows console encoding issue with the emoji. Let me fix this by removing the emoji or using a different approach.</details></think>

---

Windows console encoding issue. Let me fix the emoji:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -79,7 +79,7 @@
      with open("data/nerdwallet_cities_comprehensive.json", "r", encoding="utf-8") as f:
          CITY_DATABASE = json.load(f)
-     print(f"‚úÖ Loaded {len(CITY_DATABASE)} cities from database")
+     print(f"[OK] Loaded {len(CITY_DATABASE)} cities from database")
  except FileNotFoundError:
-     print("‚ö†Ô∏è  City database not found. Falling back to basic URL formatting.")
+     print("[WARN] City database not found. Falling back to basic URL formatting.")
  
  
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Good! Let me test again.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -150</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py 2>&1 | head -150
```

```
$ .venv/Scripts/python.exe 04-agno-agentos.py 2&gt;&amp;1 | head -150
INFO Embedder not provided, using OpenAIEmbedder as default.
[OK] Loaded 178 cities from database
Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 232, in &lt;module&gt;    
    cost_analyst = Agent(
        name="Cost Analyst",
    ...&lt;18 lines&gt;...
        markdown=True,
    )
TypeError: Agent.__init__() got an unexpected keyword argument 'agent_id'       
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




`agent_id` is not a valid parameter. It should probably be `id` instead. Let me check the Agno docs and update all occurrences.</details></think>

---

`agent_id` should be `id`. Let me fix all agents:

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -231,6 +231,6 @@
  
  cost_analyst = Agent(
+     id="cost-analyst",  # Unique ID for AgentOS
      name="Cost Analyst",
-     agent_id="cost-analyst",  # Unique ID for AgentOS
      model=OpenAIChat("gpt-4o-mini"),
      role="Analyzes cost of living differences between cities",
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -254,6 +254,6 @@
  
  sentiment_analyst = Agent(
+     id="sentiment-analyst",  # Unique ID for AgentOS
      name="Sentiment Analyst",
-     agent_id="sentiment-analyst",  # Unique ID for AgentOS
      model=OpenAIChat("gpt-4o-mini"),
      role="Researches city vibe, culture, and livability",
```

</details>

</tool-use>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -276,6 +276,6 @@
  
  migration_researcher = Agent(
+     id="migration-researcher",  # Unique ID for AgentOS
      name="Migration Researcher",
-     agent_id="migration-researcher",  # Unique ID for AgentOS
      model=OpenAIChat("gpt-4o-mini"),
      role="Finds and summarizes experiences from people who made similar moves",
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>




Good! Now let me test again to see if there are more errors.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Let me wait a bit and check if the server started successfully.</details></think>

---

Let me check if the server started:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: sleep 5 && curl -s http://localhost:7777/health 2>&1 || echo "Checking server..."</summary>

```bash
sleep 5 && curl -s http://localhost:7777/health 2>&1 || echo "Checking server..."
```

```
Checking server...
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




The server is still not responding. Let me check if the process is running and what might be happening.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: tasklist | findstr python</summary>

```bash
tasklist | findstr python
```

```
$ tasklist | findstr python
python.exe                   22944 Console                    1     50,340 K
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




The Python process is running. Let me check the logs or try to see what's happening. Let me try killing it and running it in the foreground to see the error.</details></think>

---

The process is running. Let me kill it and run in foreground to see the output:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: taskkill //F //PID 22944 2>&1 && sleep 2 && .venv/Scripts/python.exe 04-agno-agentos.py</summary>

```bash
taskkill //F //PID 22944 2>&1 && sleep 2 && .venv/Scripts/python.exe 04-agno-agentos.py
```

```
ERROR: The process "22944" not found.
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Process already exited. Let me just run it in foreground now.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: .venv/Scripts/python.exe 04-agno-agentos.py 2>&1</summary>

```bash
.venv/Scripts/python.exe 04-agno-agentos.py 2>&1
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Let me wait a bit longer this time and check.</details></think>

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: sleep 10 && curl http://localhost:7777/health</summary>

```bash
sleep 10 && curl http://localhost:7777/health
```

```
$ sleep 10 &amp;&amp; curl http://localhost:7777/health
curl: (7) Failed to connect to localhost port 7777 after 2248 ms: Could not connect to server                                                                   
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Something is preventing the server from starting. Let me try running it with stdout capture to see what the error is. Let me run it directly without background mode, but interrupt it with timeout.</details></think>

---

Let me capture the actual output by running briefly:

---

<tool-use data-tool-type="shell" data-tool-name="run_terminal_cmd">
<details><summary>Tool use: **run_terminal_cmd** ‚Ä¢ Run command: timeout 10 .venv/Scripts/python.exe 04-agno-agentos.py 2>&1 || true</summary>

```bash
timeout 10 .venv/Scripts/python.exe 04-agno-agentos.py 2>&1 || true
```

```
$ timeout 10 .venv/Scripts/python.exe 04-agno-agentos.py 2&gt;&amp;1 || true
INFO Embedder not provided, using OpenAIEmbedder as default.
[OK] Loaded 178 cities from database
Traceback (most recent call last):
  File "C:\CodeWork\should-i-move\04-agno-agentos.py", line 306, in &lt;module&gt;    
    move_decision_team = Team(
        name="City Move Decision Team",
    ...&lt;38 lines&gt;...
        show_members_responses=True,
    )
TypeError: Team.__init__() got an unexpected keyword argument 'team_id'
```
</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Same issue with Team - `team_id` should be `id`. Let me fix that.</details></think>

---

Same issue - `team_id` should be `id`:

---

<tool-use data-tool-type="search" data-tool-name="grep">
<details>
<summary>Tool use: **grep** ‚Ä¢ Grep for "team_id=" in "04-agno-agentos.py" ‚Ä¢ 1 match</summary>

Output mode: content


| File | Content | Line |
|------|------|------|
| `04-agno-agentos.py` | `team_id="move-decision-team",  # Unique ID for AgentOS` | L308 |


</details>
</tool-use>

---

<think><details><summary>Thought Process</summary>




Let me fix this.</details></think>

---

<tool-use data-tool-type="write" data-tool-name="search_replace">

<details><summary>Tool use: **search_replace** ‚Ä¢ Edit file: 04-agno-agentos.py</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -305,6 +305,6 @@
  
  move_decision_team = Team(
+     id="move-decision-team",  # Unique ID for AgentOS
      name="City Move Decision Team",
-     team_id="move-decision-team",  # Unique ID for AgentOS
      model=OpenAIChat("gpt-4o-mini"),
      members=[cost_analyst, sentiment_analyst, migration_researcher],
```

</details>

</tool-use>

---

<think><details><summary>Thought Process</summary>
Good! Now let me test again.</details></think>

---

Cancelled

---

